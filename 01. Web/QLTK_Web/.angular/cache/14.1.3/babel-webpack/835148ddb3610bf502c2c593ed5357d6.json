{"ast":null,"code":"import { ElementRef } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/shared\";\nimport * as i2 from \"src/app/report/service/employee-present.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"../../shared/directives/nts-number-int.directive\";\nimport * as i6 from \"../../shared/component/nts-search-bar/nts-search-bar.component\";\nimport * as i7 from \"ngx-perfect-scrollbar\";\nconst _c0 = [\"scrollHeaderCoefficient\"];\nconst _c1 = [\"scrollCoefficient\"];\n\nfunction CoefficientEmployeesComponent_tr_61_ng_container_7_td_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"td\", 35)(1, \"input\", 36);\n    i0.ɵɵlistener(\"ngModelChange\", function CoefficientEmployeesComponent_tr_61_ng_container_7_td_1_Template_input_ngModelChange_1_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const item_r8 = restoredCtx.$implicit;\n      return i0.ɵɵresetView(item_r8.Coefficient = $event);\n    });\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const item_r8 = ctx.$implicit;\n    const j_r9 = ctx.index;\n    const ctx_r12 = i0.ɵɵnextContext(2);\n    const row_r4 = ctx_r12.$implicit;\n    const i_r5 = ctx_r12.index;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"name\", row_r4.EmployeeCode + i_r5 + j_r9);\n    i0.ɵɵproperty(\"ngModel\", item_r8.Coefficient);\n  }\n}\n\nfunction CoefficientEmployeesComponent_tr_61_ng_container_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, CoefficientEmployeesComponent_tr_61_ng_container_7_td_1_Template, 2, 2, \"td\", 34);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const row_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", row_r4.ListCoefficient);\n  }\n}\n\nfunction CoefficientEmployeesComponent_tr_61_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 21);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\", 31);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\", 32);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(7, CoefficientEmployeesComponent_tr_61_ng_container_7_Template, 2, 1, \"ng-container\", 33);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const row_r4 = ctx.$implicit;\n    const i_r5 = ctx.index;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i_r5 + 1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(row_r4.EmployeeName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(row_r4.EmployeeCode);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.listCoefficient.length > 0);\n  }\n}\n\nexport let CoefficientEmployeesComponent = /*#__PURE__*/(() => {\n  class CoefficientEmployeesComponent {\n    constructor(appSetting, messageService, constant, service, comboboxService) {\n      this.appSetting = appSetting;\n      this.messageService = messageService;\n      this.constant = constant;\n      this.service = service;\n      this.comboboxService = comboboxService;\n      this.date = new Date();\n      this.listCoefficient = [];\n      this.model = {\n        Date: '',\n        SBUId: '',\n        DepartmentId: '',\n        Code: '',\n        Year: this.date.getFullYear(),\n        ProjectId: '',\n        ModuleGroupId: ''\n      };\n      this.searchOptions = {\n        FieldContentName: 'Code',\n        Placeholder: 'Tìm kiếm theo mã và tên nhân viên',\n        Items: [{\n          Name: 'SBU',\n          FieldName: 'SBUId',\n          Placeholder: 'SBU',\n          Type: 'select',\n          DataType: this.constant.SearchDataType.SBU,\n          DisplayName: 'Name',\n          ValueName: 'Id',\n          IsRelation: true,\n          RelationIndexTo: 1\n        }, {\n          Name: 'Phòng ban',\n          FieldName: 'DepartmentId',\n          Placeholder: 'Phòng ban',\n          Type: 'select',\n          DataType: this.constant.SearchDataType.Department,\n          DisplayName: 'Name',\n          ValueName: 'Id',\n          RelationIndexFrom: 0\n        }, {\n          Placeholder: 'Năm',\n          Name: 'Năm',\n          FieldName: 'Year',\n          Type: 'numberYear'\n        }]\n      };\n    }\n\n    ngOnInit() {\n      this.heightTable = window.innerHeight - 280;\n      this.appSetting.PageTitle = \"Hệ số năng lực nhân viên\";\n      let currentUser = JSON.parse(localStorage.getItem('qltkcurrentUser'));\n\n      if (currentUser) {\n        this.model.SBUId = currentUser.sbuId;\n        this.model.DepartmentId = currentUser.departmentId;\n      }\n\n      this.coefficientEmployee();\n    }\n\n    ngAfterViewInit() {\n      this.scrollHeaderCoefficient.nativeElement.addEventListener('ps-scroll-x', event => {\n        this.scrollCoefficient.nativeElement.scrollLeft = event.target.scrollLeft;\n      }, true);\n    }\n\n    ngOnDestroy() {\n      this.scrollHeaderCoefficient.nativeElement.removeEventListener('ps-scroll-x', null);\n    }\n\n    coefficientEmployee() {\n      this.service.coefficientEmployee(this.model).subscribe(data => {\n        this.listCoefficient = data.ListData;\n      }, error => {\n        this.messageService.showError(error);\n      });\n    }\n\n    updateCoefficientEmployee() {\n      var modelUpdate = {\n        SBUId: this.model.SBUId,\n        DepartmentId: this.model.DepartmentId,\n        Year: this.model.Year,\n        ListData: this.listCoefficient\n      };\n      this.service.updateCoefficientEmployee(modelUpdate).subscribe(data => {\n        this.messageService.showSuccess(\"Cấu hình hệ số nhân viên thành công!\");\n      }, error => {\n        this.messageService.showError(error);\n      });\n    }\n\n    clear() {\n      this.model = {\n        SBUId: '',\n        DepartmentId: '',\n        Code: '',\n        ProjectId: '',\n        ModuleGroupId: ''\n      };\n      this.model.Date = new Date();\n      this.coefficientEmployee();\n    }\n\n  }\n\n  CoefficientEmployeesComponent.ɵfac = function CoefficientEmployeesComponent_Factory(t) {\n    return new (t || CoefficientEmployeesComponent)(i0.ɵɵdirectiveInject(i1.AppSetting), i0.ɵɵdirectiveInject(i1.MessageService), i0.ɵɵdirectiveInject(i1.Constants), i0.ɵɵdirectiveInject(i2.EmployeePresentService), i0.ɵɵdirectiveInject(i1.ComboboxService));\n  };\n\n  CoefficientEmployeesComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CoefficientEmployeesComponent,\n    selectors: [[\"app-coefficient-employees\"]],\n    viewQuery: function CoefficientEmployeesComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n        i0.ɵɵviewQuery(_c1, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.scrollHeaderCoefficient = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.scrollCoefficient = _t.first);\n      }\n    },\n    decls: 69,\n    vars: 10,\n    consts: [[1, \"content-wrapper\"], [1, \"content-body\", \"padding-15\"], [\"name\", \"searchForm\"], [\"f\", \"ngForm\"], [1, \"row\"], [1, \"col-xl-8\", \"col-lg-8\", \"col-md-8\", \"col-sm-8\"], [\"name\", \"model\", 3, \"options\", \"ngModel\", \"optionsChange\", \"ngModelChange\", \"change\"], [1, \"col-xl-4\", \"col-lg-4\", \"col-md-4\", \"col-sm-4\", \"text-right\"], [1, \"btn\", \"btn-success\", \"btn-success-system\", 3, \"click\"], [1, \"fa\", \"fa-search\"], [1, \"btn\", \"btn-default\", \"btn-default-system\", 3, \"click\"], [1, \"fas\", \"fa-redo-alt\"], [1, \"row\", \"mt-3\"], [1, \"col-lg-6\", \"col-md-6\", \"col-sm-12\", \"col-xs-12\", \"text-left\"], [1, \"form-label\", 2, \"line-height\", \"35px\"], [1, \"bold\", \"text-danger\"], [\"scrollHeaderCoefficient\", \"\"], [1, \"col-lg-12\", \"col-md-12\", \"col-sm-12\", \"col-xl-12\", \"mt-2\"], [2, \"overflow-x\", \"auto\", \"overflow\", \"hidden\"], [\"scrollCoefficient\", \"\"], [1, \"table\", \"table-bordered\", \"table-fixed\", \"mb-0\", 2, \"word-wrap\", \"break-word\"], [\"width\", \"50px\", 1, \"text-center\"], [\"min-width\", \"200px\", 1, \"text-center\"], [\"width\", \"150px\", 1, \"text-center\"], [\"width\", \"100px\", 1, \"text-center\"], [3, \"config\"], [1, \"table\", \"table-bordered\", \"table-fixed\", \"mb-0\"], [4, \"ngFor\", \"ngForOf\"], [1, \"col-lg-12\", \"col-md-12\", \"col-sm-12\", \"col-xs-12\", \"text-right\"], [\"type\", \"button\", 1, \"btn\", \"btn-success\", 3, \"click\"], [1, \"fa\", \"fa-save\"], [\"min-width\", \"200px\"], [\"width\", \"150px\"], [4, \"ngIf\"], [\"class\", \"text-center\", \"style\", \" width: 100px;\", 4, \"ngFor\", \"ngForOf\"], [1, \"text-center\", 2, \"width\", \"100px\"], [\"ntsNumberInt\", \"\", \"type\", \"number\", 1, \"form-control\", 3, \"ngModel\", \"name\", \"ngModelChange\"]],\n    template: function CoefficientEmployeesComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"form\", 2, 3)(4, \"div\", 4)(5, \"div\", 5)(6, \"nts-search-bar\", 6);\n        i0.ɵɵlistener(\"optionsChange\", function CoefficientEmployeesComponent_Template_nts_search_bar_optionsChange_6_listener($event) {\n          return ctx.searchOptions = $event;\n        })(\"ngModelChange\", function CoefficientEmployeesComponent_Template_nts_search_bar_ngModelChange_6_listener($event) {\n          return ctx.model = $event;\n        })(\"change\", function CoefficientEmployeesComponent_Template_nts_search_bar_change_6_listener() {\n          return ctx.coefficientEmployee();\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(7, \"div\", 7)(8, \"button\", 8);\n        i0.ɵɵlistener(\"click\", function CoefficientEmployeesComponent_Template_button_click_8_listener() {\n          return ctx.coefficientEmployee();\n        });\n        i0.ɵɵelement(9, \"i\", 9);\n        i0.ɵɵtext(10, \" \\u00A0T\\u00ECm ki\\u1EBFm\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(11, \"\\u00A0 \\u00A0 \");\n        i0.ɵɵelementStart(12, \"button\", 10);\n        i0.ɵɵlistener(\"click\", function CoefficientEmployeesComponent_Template_button_click_12_listener() {\n          return ctx.clear();\n        });\n        i0.ɵɵelement(13, \"i\", 11);\n        i0.ɵɵtext(14, \" \\u00A0L\\u00E0m m\\u1EDBi\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(15, \"div\", 12)(16, \"div\", 13)(17, \"label\", 14);\n        i0.ɵɵelement(18, \"span\", 15);\n        i0.ɵɵtext(19, \"Danh s\\u00E1ch h\\u1EC7 s\\u1ED1 n\\u0103ng l\\u1EF1c c\\u1EE7a t\\u1EEBng nh\\u00E2n vi\\u00EAn\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(20, \"div\", 4, 16)(22, \"div\", 17)(23, \"div\", 18, 19)(25, \"table\", 20)(26, \"thead\")(27, \"tr\")(28, \"th\", 21);\n        i0.ɵɵtext(29, \"STT\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(30, \"th\", 22);\n        i0.ɵɵtext(31, \"T\\u00EAn nh\\u00E2n vi\\u00EAn\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(32, \"th\", 23);\n        i0.ɵɵtext(33, \"M\\u00E3 nh\\u00E2n vi\\u00EAn\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(34, \"th\", 24);\n        i0.ɵɵtext(35, \"Th\\u00E1ng 1\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(36, \"th\", 24);\n        i0.ɵɵtext(37, \"Th\\u00E1ng 2\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(38, \"th\", 24);\n        i0.ɵɵtext(39, \"Th\\u00E1ng 3\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(40, \"th\", 24);\n        i0.ɵɵtext(41, \"Th\\u00E1ng 4\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(42, \"th\", 24);\n        i0.ɵɵtext(43, \"Th\\u00E1ng 5\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(44, \"th\", 24);\n        i0.ɵɵtext(45, \"Th\\u00E1ng 6\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(46, \"th\", 24);\n        i0.ɵɵtext(47, \"Th\\u00E1ng 7\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(48, \"th\", 24);\n        i0.ɵɵtext(49, \"Th\\u00E1ng 8\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(50, \"th\", 24);\n        i0.ɵɵtext(51, \"Th\\u00E1ng 9\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(52, \"th\", 24);\n        i0.ɵɵtext(53, \"Th\\u00E1ng 10\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(54, \"th\", 24);\n        i0.ɵɵtext(55, \"Th\\u00E1ng 11\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(56, \"th\", 24);\n        i0.ɵɵtext(57, \"Th\\u00E1ng 12\");\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(58, \"perfect-scrollbar\", 25)(59, \"table\", 26)(60, \"tbody\");\n        i0.ɵɵtemplate(61, CoefficientEmployeesComponent_tr_61_Template, 8, 4, \"tr\", 27);\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(62, \"div\", 4)(63, \"div\", 28)(64, \"button\", 29);\n        i0.ɵɵlistener(\"click\", function CoefficientEmployeesComponent_Template_button_click_64_listener() {\n          return ctx.updateCoefficientEmployee();\n        });\n        i0.ɵɵelement(65, \"i\", 30);\n        i0.ɵɵtext(66, \"\\u00A0 \");\n        i0.ɵɵelementStart(67, \"span\");\n        i0.ɵɵtext(68, \"L\\u01B0u\");\n        i0.ɵɵelementEnd()()()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"options\", ctx.searchOptions)(\"ngModel\", ctx.model);\n        i0.ɵɵadvance(19);\n        i0.ɵɵstyleProp(\"min-width\", 1600, \"px\");\n        i0.ɵɵadvance(33);\n        i0.ɵɵstyleProp(\"max-height\", ctx.heightTable, \"px\");\n        i0.ɵɵproperty(\"config\", ctx.constant.ScrollConfig);\n        i0.ɵɵadvance(1);\n        i0.ɵɵstyleProp(\"min-width\", 1600, \"px\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.listCoefficient);\n      }\n    },\n    dependencies: [i3.NgForOf, i3.NgIf, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NumberValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.NgModel, i4.NgForm, i5.NtsNumberIntDirective, i6.NTSSearchBarComponent, i7.PerfectScrollbarComponent]\n  });\n  return CoefficientEmployeesComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}