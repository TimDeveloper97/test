{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/html_editor/utils/table_helper.js)\r\n * Version: 22.1.4\r\n * Build date: Fri Jul 22 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../../../core/renderer\";\nimport { each } from \"../../../core/utils/iterator\";\nimport { camelize } from \"../../../core/utils/inflector\";\nvar TABLE_FORMATS = [\"table\", \"tableHeaderCell\"];\nvar TABLE_OPERATIONS = [\"insertTable\", \"insertHeaderRow\", \"insertRowAbove\", \"insertRowBelow\", \"insertColumnLeft\", \"insertColumnRight\", \"deleteColumn\", \"deleteRow\", \"deleteTable\", \"cellProperties\", \"tableProperties\"];\n\nfunction getTableFormats(quill) {\n  var tableModule = quill.getModule(\"table\");\n  return null !== tableModule && void 0 !== tableModule && tableModule.tableFormats ? tableModule.tableFormats() : TABLE_FORMATS;\n}\n\nfunction hasEmbedContent(module, selection) {\n  return !!selection && module.quill.getText(selection).trim().length < selection.length;\n}\n\nfunction unfixTableWidth($table, _ref) {\n  var {\n    tableBlot: tableBlot,\n    quill: quill\n  } = _ref;\n  var formatBlot = null !== tableBlot && void 0 !== tableBlot ? tableBlot : quill.scroll.find($table.get(0));\n  formatBlot.format(\"tableWidth\", \"initial\");\n}\n\nfunction getColumnElements($table) {\n  var index = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0;\n  return $table.find(\"tr\").eq(index).find(\"th, td\");\n}\n\nfunction getAutoSizedElements($table) {\n  var direction = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : \"horizontal\";\n  var result = [];\n  var isHorizontal = \"horizontal\" === direction;\n  var $lineElements = isHorizontal ? getColumnElements($table) : getRowElements($table);\n  $lineElements.each((index, element) => {\n    var $element = $(element);\n\n    if (\"\" === $element.get(0).style[isHorizontal ? \"width\" : \"height\"]) {\n      result.push($element);\n    }\n  });\n  return result;\n}\n\nfunction setLineElementsFormat(module, _ref2) {\n  var {\n    elements: elements,\n    property: property,\n    value: value\n  } = _ref2;\n  var tableBlotNames = module.quill.getModule(\"table\").tableBlots;\n  var fullPropertyName = \"cell\".concat(camelize(property, true));\n  each(elements, (i, element) => {\n    var _formatBlot;\n\n    var formatBlot = module.quill.scroll.find(element);\n\n    if (!tableBlotNames.includes(formatBlot.statics.blotName)) {\n      var descendBlot = formatBlot.descendant(blot => tableBlotNames.includes(blot.statics.blotName));\n      formatBlot = descendBlot ? descendBlot[0] : null;\n    }\n\n    null === (_formatBlot = formatBlot) || void 0 === _formatBlot ? void 0 : _formatBlot.format(fullPropertyName, value + \"px\");\n  });\n}\n\nfunction getLineElements($table, index) {\n  var direction = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : \"horizontal\";\n  return \"horizontal\" === direction ? getRowElements($table, index) : getColumnElements($table, index);\n}\n\nfunction getRowElements($table) {\n  var index = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0;\n  return $table.find(\"th:nth-child(\".concat(1 + index, \"), td:nth-child(\").concat(1 + index, \")\"));\n}\n\nfunction getTableOperationHandler(quill, operationName) {\n  for (var _len = arguments.length, rest = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n    rest[_key - 2] = arguments[_key];\n  }\n\n  return () => {\n    var table = quill.getModule(\"table\");\n\n    if (!table) {\n      return;\n    }\n\n    quill.focus();\n    return table[operationName](...rest);\n  };\n}\n\nexport { TABLE_OPERATIONS, getTableFormats, getTableOperationHandler, unfixTableWidth, getColumnElements, getAutoSizedElements, setLineElementsFormat, getLineElements, getRowElements, hasEmbedContent };","map":null,"metadata":{},"sourceType":"module"}