{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { PracticeExpertsChooseComponent } from '../practice-experts-choose/practice-experts-choose.component';\nimport { HistoryVersionComponent } from 'src/app/shared/component/history-version/history-version.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/shared\";\nimport * as i3 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i4 from \"../service/practice-expert.service\";\nimport * as i5 from \"src/app/shared/services/history-version.service\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"../../../shared/directives/uipermission.directive\";\nimport * as i8 from \"ngx-perfect-scrollbar\";\n\nfunction PracticeExpertsComponent_button_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 22);\n    i0.ɵɵlistener(\"click\", function PracticeExpertsComponent_button_8_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.showClick());\n    });\n    i0.ɵɵelement(1, \"span\", 23);\n    i0.ɵɵtext(2, \" Ch\\u1ECDn \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction PracticeExpertsComponent_tr_41_button_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 28);\n    i0.ɵɵlistener(\"click\", function PracticeExpertsComponent_tr_41_button_4_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const row_r5 = i0.ɵɵnextContext().$implicit;\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.showConfirmDelete(row_r5));\n    });\n    i0.ɵɵelement(1, \"span\", 29);\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction PracticeExpertsComponent_tr_41_div_18_div_1_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const row2_r13 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\"STK: \", row2_r13.Account, \" - Ng\\u00E2n h\\u00E0ng: \", row2_r13.Name, \"\");\n  }\n}\n\nfunction PracticeExpertsComponent_tr_41_div_18_div_1_span_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const row2_r13 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate3(\"STK: \", row2_r13.Account, \" - Chi nh\\u00E1nh: \", row2_r13.AccountName, \" - Ng\\u00E2n h\\u00E0ng: \", row2_r13.Name, \"\");\n  }\n}\n\nfunction PracticeExpertsComponent_tr_41_div_18_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, PracticeExpertsComponent_tr_41_div_18_div_1_span_1_Template, 2, 2, \"span\", 30);\n    i0.ɵɵtemplate(2, PracticeExpertsComponent_tr_41_div_18_div_1_span_2_Template, 2, 3, \"span\", 30);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const row2_r13 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", row2_r13.AccountName == \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", row2_r13.AccountName != \"\");\n  }\n}\n\nfunction PracticeExpertsComponent_tr_41_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, PracticeExpertsComponent_tr_41_div_18_div_1_Template, 3, 2, \"div\", 17);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const row_r5 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", row_r5.ListBank);\n  }\n}\n\nconst _c0 = function () {\n  return [\"F040718\"];\n};\n\nfunction PracticeExpertsComponent_tr_41_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 24);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\", 24);\n    i0.ɵɵtemplate(4, PracticeExpertsComponent_tr_41_button_4_Template, 2, 0, \"button\", 25);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\");\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"td\");\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"td\", 26);\n    i0.ɵɵtemplate(18, PracticeExpertsComponent_tr_41_div_18_Template, 2, 1, \"div\", 27);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"td\");\n    i0.ɵɵtext(20);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const row_r5 = ctx.$implicit;\n    const i_r6 = ctx.index;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i_r6 + 1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"appUipermission\", i0.ɵɵpureFunction0(10, _c0));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(row_r5.Name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(row_r5.Code);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(row_r5.SpecializeName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(row_r5.WorkPlaceName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(row_r5.DegreeName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(row_r5.PhoneNumber);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", row_r5.ListBank.length > 0);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(row_r5.Description);\n  }\n}\n\nfunction PracticeExpertsComponent_button_43_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r21 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 31);\n    i0.ɵɵlistener(\"click\", function PracticeExpertsComponent_button_43_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r21);\n      const ctx_r20 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r20.showConfirmUploadVersion());\n    });\n    i0.ɵɵelement(1, \"i\", 32);\n    i0.ɵɵtext(2, \"\\u00A0 \");\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4, \"L\\u01B0u\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nconst _c1 = function () {\n  return [\"F040717\"];\n};\n\nexport let PracticeExpertsComponent = /*#__PURE__*/(() => {\n  class PracticeExpertsComponent {\n    constructor(router, messageService, config, modalService, service, constants, permissionService, serviceHistory) {\n      this.router = router;\n      this.messageService = messageService;\n      this.config = config;\n      this.modalService = modalService;\n      this.service = service;\n      this.constants = constants;\n      this.permissionService = permissionService;\n      this.serviceHistory = serviceHistory;\n      this.listData = [];\n      this.model = {\n        page: 1,\n        PageSize: 10,\n        TotalItem: 0,\n        PageNumber: 1,\n        OrderBy: 'Name',\n        OrderType: true,\n        Id: '',\n        Name: '',\n        ExpertId: '',\n        PracticeId: '',\n        listSelect: []\n      };\n    }\n\n    ngOnInit() {\n      this.model.PracticeId = this.Id;\n      this.searchPracticeExpert();\n    }\n\n    showClick() {\n      let activeModal = this.modalService.open(PracticeExpertsChooseComponent, {\n        container: 'body',\n        windowClass: 'practice-experts-model',\n        backdrop: 'static'\n      });\n      activeModal.componentInstance.PracticeId = this.model.PracticeId;\n      var ListIdSelect = [];\n      this.listData.forEach(element => {\n        ListIdSelect.push(element.Id);\n      });\n      activeModal.componentInstance.ListIdSelect = ListIdSelect;\n      activeModal.result.then(result => {\n        if (result && result.length > 0) {\n          result.forEach(element => {\n            this.listData.push(element);\n          });\n        }\n      }, reason => {});\n    }\n\n    searchPracticeExpert() {\n      if (!this.permissionService.checkPermission(['F040719'])) {\n        this.service.searchPracticeExpert(this.model).subscribe(data => {\n          this.listData = data.ListResult;\n        }, error => {\n          this.messageService.showError(error);\n        });\n      }\n    }\n\n    save() {\n      this.model.listSelect = this.listData;\n      this.service.createPracticeExpert(this.model).subscribe(data => {\n        this.messageService.showSuccess('Lưu thông tin chuyên gia thành công!');\n      }, error => {\n        this.messageService.showError(error);\n      });\n    }\n\n    showConfirmDelete(model) {\n      this.messageService.showConfirm(\"Bạn có chắc muốn xoá chuyên gia này không?\").then(data => {\n        this.delete(model);\n      }, error => {});\n    }\n\n    delete(model) {\n      var index = this.listData.indexOf(model);\n\n      if (index > -1) {\n        this.listData.splice(index, 1);\n      }\n    }\n\n    closeModal() {\n      this.router.navigate(['thuc-hanh/quan-ly-bai-thuc-hanh']);\n    }\n\n    showConfirmUploadVersion() {\n      this.messageService.showConfirmFile(\"Bạn có muốn thay đổi version không?\").then(data => __awaiter(this, void 0, void 0, function* () {\n        if (data) {\n          yield this.showEditContent();\n        } else {\n          this.save();\n        }\n      }));\n    }\n\n    showEditContent() {\n      return __awaiter(this, void 0, void 0, function* () {\n        let activeModal = this.modalService.open(HistoryVersionComponent, {\n          container: 'body',\n          windowClass: 'show-history-version-modal',\n          backdrop: 'static'\n        });\n        activeModal.componentInstance.id = this.Id;\n        activeModal.componentInstance.type = this.constants.HistoryVersion_Version_Practice;\n        activeModal.result.then(result => __awaiter(this, void 0, void 0, function* () {\n          if (result) {\n            yield this.save();\n            yield this.updateVersion(result);\n          }\n        }), reason => {});\n      });\n    }\n\n    updateVersion(model) {\n      this.serviceHistory.updateVersion(model).subscribe(() => {\n        this.messageService.showSuccess('Cập nhật version thành công!');\n      }, error => {\n        this.messageService.showError(error);\n      });\n    }\n\n  }\n\n  PracticeExpertsComponent.ɵfac = function PracticeExpertsComponent_Factory(t) {\n    return new (t || PracticeExpertsComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.MessageService), i0.ɵɵdirectiveInject(i2.Configuration), i0.ɵɵdirectiveInject(i3.NgbModal), i0.ɵɵdirectiveInject(i4.PracticeExpertService), i0.ɵɵdirectiveInject(i2.Constants), i0.ɵɵdirectiveInject(i2.PermissionService), i0.ɵɵdirectiveInject(i5.HistoryVersionService));\n  };\n\n  PracticeExpertsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: PracticeExpertsComponent,\n    selectors: [[\"app-practice-experts\"]],\n    inputs: {\n      Id: \"Id\"\n    },\n    decls: 50,\n    vars: 7,\n    consts: [[1, \"row\"], [1, \"col-md-4\", \"text-left\"], [1, \"form-label\", 2, \"line-height\", \"35px\"], [1, \"bold\", \"text-danger\"], [1, \"col-lg-8\", \"col-md-8\", \"col-sm-8\", \"col-xs-12\", \"text-right\"], [\"type\", \" button\", \"class\", \"btn btn-success\", 3, \"click\", 4, \"appUipermission\"], [1, \"btn\", \"btn-default\", \"btn-default-system\", 3, \"click\"], [1, \"fas\", \"fa-redo-alt\"], [1, \"col-lg-12\", \"col-md-12\", \"col-sm-12\"], [3, \"config\"], [1, \"table\", \"table-bordered\", \"table-fixed\", 2, \"min-width\", \"1590px\"], [\"width\", \"50px\"], [\"width\", \"150px\"], [\"width\", \"200px\"], [\"min-width\", \"200px\"], [\"width\", \"120px\", 1, \"text-center\"], [\"width\", \"400px\", 1, \"text-center\"], [4, \"ngFor\", \"ngForOf\"], [1, \"text-right\"], [\"type\", \"button\", \"class\", \"btn btn-success\", 3, \"click\", 4, \"appUipermission\"], [\"type\", \"button\", 1, \"btn\", \"btn-danger\", 3, \"click\"], [1, \"fa\", \"fa-power-off\"], [\"type\", \" button\", 1, \"btn\", \"btn-success\", 3, \"click\"], [\"aria-hidden\", \"true\", 1, \"fa\", \"fa-plus\"], [1, \"text-center\"], [\"type\", \"button\", \"class\", \"btn  btn-xs btn-danger\", \"ngbTooltip\", \"X\\u00F3a\", \"placement\", \"bottom\", \"container\", \"body\", 3, \"click\", 4, \"appUipermission\"], [2, \"padding\", \"0\"], [4, \"ngIf\"], [\"type\", \"button\", \"ngbTooltip\", \"X\\u00F3a\", \"placement\", \"bottom\", \"container\", \"body\", 1, \"btn\", \"btn-xs\", \"btn-danger\", 3, \"click\"], [\"aria-hidden\", \"true\", 1, \"fas\", \"fa-times\"], [\"width\", \"150px\", 4, \"ngIf\"], [\"type\", \"button\", 1, \"btn\", \"btn-success\", 3, \"click\"], [1, \"fa\", \"fa-save\"]],\n    template: function PracticeExpertsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"label\", 2);\n        i0.ɵɵtext(3, \"T\\u1ED5ng s\\u1ED1 \");\n        i0.ɵɵelementStart(4, \"span\", 3);\n        i0.ɵɵtext(5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(6, \" chuy\\u00EAn gia \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(7, \"div\", 4);\n        i0.ɵɵtemplate(8, PracticeExpertsComponent_button_8_Template, 3, 0, \"button\", 5);\n        i0.ɵɵtext(9, \" \\u00A0 \");\n        i0.ɵɵelementStart(10, \"button\", 6);\n        i0.ɵɵlistener(\"click\", function PracticeExpertsComponent_Template_button_click_10_listener() {\n          return ctx.searchPracticeExpert();\n        });\n        i0.ɵɵelement(11, \"i\", 7);\n        i0.ɵɵtext(12, \" \\u00A0L\\u00E0m m\\u1EDBi\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelement(13, \"br\");\n        i0.ɵɵelementStart(14, \"div\", 0)(15, \"div\", 8)(16, \"perfect-scrollbar\", 9)(17, \"table\", 10)(18, \"thead\")(19, \"tr\")(20, \"th\", 11);\n        i0.ɵɵtext(21, \"STT\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"th\", 11);\n        i0.ɵɵtext(23, \"X\\u1EED l\\u00FD\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"th\", 12);\n        i0.ɵɵtext(25, \"T\\u00EAn chuy\\u00EAn gia\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"th\", 13);\n        i0.ɵɵtext(27, \"M\\u00E3 chuy\\u00EAn gia\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(28, \"th\", 14);\n        i0.ɵɵtext(29, \"Chuy\\u00EAn m\\u00F4n\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(30, \"th\", 13);\n        i0.ɵɵtext(31, \"\\u0110\\u01A1n v\\u1ECB c\\u00F4ng t\\u00E1c\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(32, \"th\", 13);\n        i0.ɵɵtext(33, \"Tr\\u00ECnh \\u0111\\u1ED9\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(34, \"th\", 15);\n        i0.ɵɵtext(35, \"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(36, \"th\", 16);\n        i0.ɵɵtext(37, \"Chi nh\\u00E1nh ng\\u00E2n h\\u00E0ng\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(38, \"th\", 15);\n        i0.ɵɵtext(39, \"M\\u00F4 t\\u1EA3\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(40, \"tbody\");\n        i0.ɵɵtemplate(41, PracticeExpertsComponent_tr_41_Template, 21, 11, \"tr\", 17);\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(42, \"div\", 18);\n        i0.ɵɵtemplate(43, PracticeExpertsComponent_button_43_Template, 5, 0, \"button\", 19);\n        i0.ɵɵtext(44, \"\\u00A0 \");\n        i0.ɵɵelementStart(45, \"button\", 20);\n        i0.ɵɵlistener(\"click\", function PracticeExpertsComponent_Template_button_click_45_listener() {\n          return ctx.closeModal();\n        });\n        i0.ɵɵelement(46, \"i\", 21);\n        i0.ɵɵtext(47, \" \\u00A0 \");\n        i0.ɵɵelementStart(48, \"span\");\n        i0.ɵɵtext(49, \" \\u0110\\u00F3ng \");\n        i0.ɵɵelementEnd()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate(ctx.listData.length);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"appUipermission\", i0.ɵɵpureFunction0(5, _c1));\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"config\", ctx.constants.ScrollXConfig);\n        i0.ɵɵadvance(25);\n        i0.ɵɵproperty(\"ngForOf\", ctx.listData);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"appUipermission\", i0.ɵɵpureFunction0(6, _c1));\n      }\n    },\n    dependencies: [i6.NgForOf, i6.NgIf, i7.UipermissionDirective, i8.PerfectScrollbarComponent, i3.NgbTooltip]\n  });\n  return PracticeExpertsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}