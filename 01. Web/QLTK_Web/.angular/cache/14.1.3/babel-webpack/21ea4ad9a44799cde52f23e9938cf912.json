{"ast":null,"code":"import { SelectProjectComponent } from '../select-project/select-project.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/shared\";\nimport * as i2 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i3 from \"../service/future-personnel-forecast.service\";\n\nfunction FuturePersonnelForecastComponent_button_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 14);\n    i0.ɵɵlistener(\"click\", function FuturePersonnelForecastComponent_button_15_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.showSelectproject());\n    });\n    i0.ɵɵelement(1, \"i\", 47);\n    i0.ɵɵtext(2, \" \\u00A0Ch\\u1ECDn\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nconst _c0 = function () {\n  return [\"F100001\"];\n};\n\nexport let FuturePersonnelForecastComponent = /*#__PURE__*/(() => {\n  class FuturePersonnelForecastComponent {\n    constructor(appSetting, messageService, modalService, constant, forecastService, comboboxService, dateUnity) {\n      this.appSetting = appSetting;\n      this.messageService = messageService;\n      this.modalService = modalService;\n      this.constant = constant;\n      this.forecastService = forecastService;\n      this.comboboxService = comboboxService;\n      this.dateUnity = dateUnity;\n      this.listData = [];\n      this.listProject = [];\n      this.startIndex = 1;\n      this.selectIndex = -1;\n      this.listProjectProduct = [];\n      this.listExplanedId = [];\n      this.sbuId = JSON.parse(localStorage.getItem('qltkcurrentUser')).sbuId;\n      this.model = {\n        PageSize: 10,\n        TotalItems: 0,\n        PageNumber: 1,\n        ModuleGroupId: '',\n        DateStart: '',\n        DateEnd: '',\n        SBUId: '',\n        DepartmentId: '',\n        ProductId: '',\n        DateStartV: '',\n        DateEndV: '',\n        listBase: []\n      };\n      this.reportProjectModel = {\n        Id: '',\n        Index: 0\n      };\n      this.direction = 'horizontal';\n      this.searchOptions = {\n        FieldContentName: 'Name',\n        Placeholder: 'Tìm kiếm theo tên nhân viên',\n        Items: [{\n          Name: 'SBU',\n          FieldName: 'SBUId',\n          Placeholder: 'SBU',\n          Type: 'select',\n          DataType: this.constant.SearchDataType.SBU,\n          DisplayName: 'Name',\n          ValueName: 'Id',\n          IsRelation: true,\n          RelationIndexTo: 1\n        }, {\n          Name: 'Phòng ban',\n          FieldName: 'DepartmentId',\n          Placeholder: 'Phòng ban',\n          Type: 'select',\n          DataType: this.constant.SearchDataType.Department,\n          DisplayName: 'Name',\n          ValueName: 'Id',\n          RelationIndexFrom: 0\n        }]\n      };\n      this.tableHeight = 400;\n      this.listBase = [];\n      this.sizes = {\n        percent: {\n          area1: 40,\n          area2: 60\n        },\n        pixel: {\n          area1: 120,\n          area2: '*',\n          area3: 160\n        }\n      };\n    }\n\n    ngOnInit() {\n      this.appSetting.PageTitle = \"Dự báo nhân sự tương lai\";\n      this.model.SBUId = this.sbuId;\n      this.getListProject(); //this.search();\n    }\n\n    search() {\n      this.tableHeight = window.innerHeight - 180;\n      this.forecastService.SearchPlan(this.model).subscribe(data => {\n        if (data) {\n          this.listProjectProduct = data.listResult;\n          this.listProjectProduct.forEach(element => {\n            this.listExplanedId.push(element.Id);\n          });\n        }\n      }, error => {\n        this.messageService.showError(error);\n      });\n    }\n\n    getListProject() {\n      this.comboboxService.getListProject().subscribe(data => {\n        this.listProject = data;\n      }, error => {\n        this.messageService.showError(error);\n      });\n    }\n\n    onSelectionChanged(e) {\n      this.selectIndex = e.selectedRowKeys[0];\n      this.idSelected = e.selectedRowKeys[0];\n    }\n\n    clear() {\n      this.model = {\n        PageSize: 10,\n        TotalItems: 0,\n        PageNumber: 1,\n        ModuleGroupId: '',\n        DateStart: '',\n        DateEnd: '',\n        SBUId: '',\n        DepartmentId: '',\n        listBase: []\n      };\n      this.search();\n    }\n\n    showSelectproject() {\n      let activeModal = this.modalService.open(SelectProjectComponent, {\n        container: 'body',\n        windowClass: 'select-Project-model',\n        backdrop: 'static'\n      }); //var ListIdSelectRequest = [];\n\n      var ListIdSelect = [];\n      this.listBase.forEach(element => {\n        ListIdSelect.push(element.Id);\n      });\n      activeModal.componentInstance.ListIdSelect = ListIdSelect;\n      activeModal.result.then(result => {\n        this.listBase = [];\n\n        if (result && result.length > 0) {\n          result.forEach(element => {\n            var value = Object.assign({}, this.reportProjectModel);\n            value.Id = element.Id;\n            value.Index = element.Index;\n            this.listBase.push(value);\n          });\n          this.model.listBase = this.listBase;\n          this.search();\n        }\n      }, reason => {});\n    }\n\n    dragEnd(unit, {\n      sizes\n    }) {\n      if (unit === 'percent') {\n        this.sizes.percent.area1 = sizes[0];\n        this.sizes.percent.area2 = sizes[1];\n      } else if (unit === 'pixel') {\n        this.sizes.pixel.area1 = sizes[0];\n        this.sizes.pixel.area2 = sizes[1];\n        this.sizes.pixel.area3 = sizes[2];\n      }\n    }\n\n  }\n\n  FuturePersonnelForecastComponent.ɵfac = function FuturePersonnelForecastComponent_Factory(t) {\n    return new (t || FuturePersonnelForecastComponent)(i0.ɵɵdirectiveInject(i1.AppSetting), i0.ɵɵdirectiveInject(i1.MessageService), i0.ɵɵdirectiveInject(i2.NgbModal), i0.ɵɵdirectiveInject(i1.Constants), i0.ɵɵdirectiveInject(i3.FuturePersonnelForecastService), i0.ɵɵdirectiveInject(i1.ComboboxService), i0.ɵɵdirectiveInject(i1.DateUtils));\n  };\n\n  FuturePersonnelForecastComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: FuturePersonnelForecastComponent,\n    selectors: [[\"app-future-personnel-forecast\"]],\n    decls: 54,\n    vars: 35,\n    consts: [[1, \"content-wrapper\", \"schedule-project\"], [1, \"box\"], [1, \"panel_header\", \"panel_header_body\"], [1, \"title\", \"pull-left\", \"div-system\"], [1, \"actions\", \"panel_actions\", \"pull-right\"], [1, \"box_toggle\", \"material-icons\"], [1, \"content-body\", \"padding-15\"], [\"name\", \"searchForm\"], [\"f\", \"ngForm\"], [1, \"row\"], [1, \"col-xl-8\", \"col-lg-8\", \"col-md-8\", \"col-sm-8\"], [\"name\", \"modelReport\", 3, \"options\", \"ngModel\", \"optionsChange\", \"ngModelChange\", \"change\"], [1, \"col-xl-4\", \"col-lg-4\", \"col-md-4\", \"col-sm-12\", \"text-right\"], [\"class\", \"btn btn-success btn-success-system\", 3, \"click\", 4, \"appUipermission\"], [1, \"btn\", \"btn-success\", \"btn-success-system\", 3, \"click\"], [1, \"fa\", \"fa-search\"], [1, \"btn\", \"btn-default\", \"btn-default-system\", 3, \"click\"], [1, \"fas\", \"fa-redo-alt\"], [1, \"col-xl-12\", \"col-lg-12\", \"col-md-12\", \"col-sm-12\"], [1, \"special-tree-list\"], [1, \"style-tree-list\"], [\"id\", \"projectProduct\", \"keyExpr\", \"Id\", \"parentIdExpr\", \"ParentId\", \"noDataText\", \" \", 1, \"sp-1\", 3, \"dataSource\", \"showRowLines\", \"showBorders\", \"columnAutoWidth\", \"expandedRowKeys\", \"height\", \"onSelectionChanged\"], [\"mode\", \"single\"], [3, \"enabled\"], [\"dataField\", \"NameView\", \"caption\", \"K\\u1EBF ho\\u1EA1ch\", \"width\", \"300px\", \"cssClass\", \"employee\", \"fixed\", \"true\", 3, \"allowSorting\"], [\"dataField\", \"ResponsiblePersionName\", \"caption\", \"Ng\\u01B0\\u1EDDi ph\\u1EE5 tr\\u00E1ch\", \"width\", \"150px\", \"cssClass\", \"plan-header-cell\", 3, \"allowSorting\"], [\"dataField\", \"StatusView\", \"caption\", \"T\\u00ECnh tr\\u1EA1ng c\\u00F4ng vi\\u1EC7c\", \"width\", \"110px\", \"cssClass\", \"plan-header-cell\", 3, \"allowSorting\"], [\"dataField\", \"ExecutionTime\", \"caption\", \"Th\\u1EDDi gian th\\u1EF1c hi\\u1EC7n (h)\", \"width\", \"100px\", \"cssClass\", \"plan-header-cell\", 3, \"allowSorting\"], [\"dataField\", \"StartDateView\", \"caption\", \"Ng\\u00E0y b\\u1EAFt \\u0111\\u1EA7u d\\u1EF1 ki\\u1EBFn\", \"width\", \"100px\", \"cssClass\", \"plan-header-cell\", \"alignment\", \"center\", 3, \"allowSorting\"], [\"dataField\", \"EndDateView\", \"caption\", \"Ng\\u00E0y k\\u1EBFt th\\u00FAc d\\u1EF1 ki\\u1EBFn\", \"width\", \"100px\", \"cssClass\", \"plan-header-cell\", \"alignment\", \"center\", 3, \"allowSorting\"], [\"dataField\", \"RealStartDateView\", \"caption\", \"Ng\\u00E0y b\\u1EAFt \\u0111\\u1EA7u th\\u1EF1c t\\u1EBF\", \"width\", \"100px\", \"cssClass\", \"plan-header-cell\", \"alignment\", \"center\", 3, \"allowSorting\"], [\"dataField\", \"RealEndDateView\", \"caption\", \"Ng\\u00E0y k\\u1EBFt th\\u00FAc th\\u1EF1c t\\u1EBF\", \"width\", \"100px\", \"cssClass\", \"plan-header-cell\", \"alignment\", \"center\", 3, \"allowSorting\"], [\"dataField\", \"ContractName\", \"caption\", \"T\\u00EAn theo h\\u1EE3p \\u0111\\u1ED3ng\", \"width\", \"150px\", \"cssClass\", \"plan-header-cell\", 3, \"allowSorting\"], [\"dataField\", \"ContractCode\", \"caption\", \"M\\u00E3 theo h\\u1EE3p \\u0111\\u1ED3ng\", \"width\", \"100px\", \"cssClass\", \"plan-header-cell\", 3, \"allowSorting\"], [\"dataField\", \"DesignName\", \"caption\", \"T\\u00EAn theo thi\\u1EBFt k\\u1EBF\", \"width\", \"150px\", \"cssClass\", \"plan-header-cell\", 3, \"allowSorting\"], [\"dataField\", \"DesignCode\", \"caption\", \"M\\u00E3 theo thi\\u1EBFt k\\u1EBF\", \"width\", \"100px\", \"cssClass\", \"plan-header-cell\", 3, \"allowSorting\"], [\"dataField\", \"DatatypeName\", \"caption\", \"Ki\\u1EC3u d\\u1EEF li\\u1EC7u\", \"width\", \"100px\", \"cssClass\", \"plan-header-cell\", 3, \"allowSorting\"], [\"dataField\", \"IndustryCode\", \"caption\", \"M\\u00E3 ng\\u00E0nh h\\u00E0ng\", \"width\", \"100px\", \"cssClass\", \"plan-header-cell\", 3, \"allowSorting\"], [\"dataField\", \"Quantity\", \"caption\", \"S\\u1ED1 l\\u01B0\\u1EE3ng\", \"width\", \"90px\", \"cssClass\", \"plan-header-cell\", 3, \"allowSorting\"], [\"dataField\", \"PricingModule\", \"caption\", \"Gi\\u00E1 t\\u1ED5ng h\\u1EE3p TK\", \"width\", \"120px\", \"cssClass\", \"plan-header-cell\", 3, \"allowSorting\"], [\"dataField\", \"ModuleStatusView\", \"caption\", \"T\\u00ECnh tr\\u1EA1ng module\", \"width\", \"120px\", \"cssClass\", \"plan-header-cell\", 3, \"allowSorting\"], [\"dataField\", \"DesignStatusView\", \"caption\", \"T\\u00ECnh tr\\u1EA1ng TK\", \"width\", \"120px\", \"cssClass\", \"plan-header-cell\", 3, \"allowSorting\"], [\"dataField\", \"KickOffDateView\", \"caption\", \"Ng\\u00E0y kickoff\", \"width\", \"100px\", \"cssClass\", \"plan-header-cell\", \"alignment\", \"center\", 3, \"allowSorting\"], [\"dataField\", \"DesignFinishDateView\", \"caption\", \"Ng\\u00E0y ho\\u00E0n th\\u00E0nh TK\", \"width\", \"100px\", \"cssClass\", \"plan-header-cell\", \"alignment\", \"center\", 3, \"allowSorting\"], [\"dataField\", \"MakeFinishDateView\", \"caption\", \"Ng\\u00E0y ho\\u00E0n th\\u00E0nh s\\u1EA3n xu\\u1EA5t\", \"width\", \"120px\", \"cssClass\", \"plan-header-cell\", \"alignment\", \"center\", 3, \"allowSorting\"], [\"dataField\", \"DeliveryDateView\", \"caption\", \"Ng\\u00E0y giao h\\u00E0ng\", \"width\", \"100px\", \"cssClass\", \"plan-header-cell\", \"alignment\", \"center\", 3, \"allowSorting\"], [\"dataField\", \"TransferDateView\", \"caption\", \"Ng\\u00E0y chuy\\u1EC3n giao\", \"width\", \"100px\", \"cssClass\", \"plan-header-cell\", \"alignment\", \"center\", 3, \"allowSorting\"], [1, \"fa\", \"fa-plus\"]],\n    template: function FuturePersonnelForecastComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"section\", 1)(2, \"header\", 2)(3, \"h2\", 3);\n        i0.ɵɵtext(4, \"D\\u1EF1 b\\u00E1o nh\\u00E2n s\\u1EF1 t\\u01B0\\u01A1ng lai\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"div\", 4)(6, \"i\", 5);\n        i0.ɵɵtext(7, \"expand_more\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(8, \"div\", 6)(9, \"form\", 7, 8)(11, \"div\", 9)(12, \"div\", 10)(13, \"nts-search-bar\", 11);\n        i0.ɵɵlistener(\"optionsChange\", function FuturePersonnelForecastComponent_Template_nts_search_bar_optionsChange_13_listener($event) {\n          return ctx.searchOptions = $event;\n        })(\"ngModelChange\", function FuturePersonnelForecastComponent_Template_nts_search_bar_ngModelChange_13_listener($event) {\n          return ctx.model = $event;\n        })(\"change\", function FuturePersonnelForecastComponent_Template_nts_search_bar_change_13_listener() {\n          return ctx.search();\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(14, \"div\", 12);\n        i0.ɵɵtemplate(15, FuturePersonnelForecastComponent_button_15_Template, 3, 0, \"button\", 13);\n        i0.ɵɵtext(16, \"\\u00A0 \");\n        i0.ɵɵelementStart(17, \"button\", 14);\n        i0.ɵɵlistener(\"click\", function FuturePersonnelForecastComponent_Template_button_click_17_listener() {\n          return ctx.search();\n        });\n        i0.ɵɵelement(18, \"i\", 15);\n        i0.ɵɵtext(19, \" \\u00A0T\\u00ECm ki\\u1EBFm\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(20, \"\\u00A0 \");\n        i0.ɵɵelementStart(21, \"button\", 16);\n        i0.ɵɵlistener(\"click\", function FuturePersonnelForecastComponent_Template_button_click_21_listener() {\n          return ctx.clear();\n        });\n        i0.ɵɵelement(22, \"i\", 17);\n        i0.ɵɵtext(23, \" \\u00A0L\\u00E0m m\\u1EDBi\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(24, \"div\", 9)(25, \"div\", 18)(26, \"div\", 19)(27, \"div\", 20)(28, \"dx-tree-list\", 21);\n        i0.ɵɵlistener(\"onSelectionChanged\", function FuturePersonnelForecastComponent_Template_dx_tree_list_onSelectionChanged_28_listener($event) {\n          return ctx.onSelectionChanged($event);\n        });\n        i0.ɵɵelement(29, \"dxo-selection\", 22)(30, \"dxo-column-fixing\", 23)(31, \"dxi-column\", 24)(32, \"dxi-column\", 25)(33, \"dxi-column\", 26)(34, \"dxi-column\", 27)(35, \"dxi-column\", 28)(36, \"dxi-column\", 29)(37, \"dxi-column\", 30)(38, \"dxi-column\", 31)(39, \"dxi-column\", 32)(40, \"dxi-column\", 33)(41, \"dxi-column\", 34)(42, \"dxi-column\", 35)(43, \"dxi-column\", 36)(44, \"dxi-column\", 37)(45, \"dxi-column\", 38)(46, \"dxi-column\", 39)(47, \"dxi-column\", 40)(48, \"dxi-column\", 41)(49, \"dxi-column\", 42)(50, \"dxi-column\", 43)(51, \"dxi-column\", 44)(52, \"dxi-column\", 45)(53, \"dxi-column\", 46);\n        i0.ɵɵelementEnd()()()()()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(13);\n        i0.ɵɵproperty(\"options\", ctx.searchOptions)(\"ngModel\", ctx.model);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"appUipermission\", i0.ɵɵpureFunction0(34, _c0));\n        i0.ɵɵadvance(13);\n        i0.ɵɵproperty(\"dataSource\", ctx.listProjectProduct)(\"showRowLines\", true)(\"showBorders\", true)(\"columnAutoWidth\", true)(\"expandedRowKeys\", ctx.listExplanedId)(\"columnAutoWidth\", true)(\"height\", ctx.tableHeight);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"enabled\", true);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"allowSorting\", false);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"allowSorting\", false);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"allowSorting\", false);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"allowSorting\", false);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"allowSorting\", false);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"allowSorting\", false);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"allowSorting\", false);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"allowSorting\", false);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"allowSorting\", false);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"allowSorting\", false);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"allowSorting\", false);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"allowSorting\", false);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"allowSorting\", false);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"allowSorting\", false);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"allowSorting\", false);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"allowSorting\", false);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"allowSorting\", false);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"allowSorting\", false);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"allowSorting\", false);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"allowSorting\", false);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"allowSorting\", false);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"allowSorting\", false);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"allowSorting\", false);\n      }\n    },\n    styles: [\".schedule-project .plan{background-color:#69ff4b71}.schedule-project .selected{background-color:#f5f5507a;cursor:pointer}.schedule-project tr:hover{cursor:pointer}.schedule-project .dx-date-box-input{text-align:center;color:red}.schedule-project .dayOfWeek{background-color:#af8957}.schedule-project .sunday{background-color:#b83535}.schedule-project .item-update{border:none;text-align:center;color:#ff9100;background:none;padding-bottom:0;padding-top:0}.schedule-project .special-tree-list tr.dx-row.dx-column-lines.dx-header-row{height:67px}.schedule-project tr.dx-row.dx-column-lines.dx-header-row td{vertical-align:middle}.schedule-project .item-delete{border:none;text-align:center;color:red;background:none;padding-bottom:0;padding-top:0}.schedule-project .item-add{border:none;text-align:center;color:green;background:none;padding-bottom:0;padding-top:0;margin-right:10px}.schedule-project span.date-inline{bottom:0px!important}.schedule-project .style-tree-list{margin-top:0!important}.schedule-project .as-split-gutter{margin-top:0;height:auto!important}.schedule-project .as-split-area{overflow-y:hidden!important}.schedule-project .searchCondition{margin-top:39px}.schedule-project .plan-header-cell .dx-treelist-text-content{white-space:normal!important;text-align:center}.schedule-project .font-weight-bold-sp{font-weight:600}.schedule-project .dx-treelist-table tr{height:34px}\\n\"],\n    encapsulation: 2\n  });\n  return FuturePersonnelForecastComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}