<div class="content-wrapper">
    <form name="form" class="tab-form-demo" #f="ngForm" novalidate>
        <section class="box">
            <div class="content-body">
                <div class="row">
                    <div class="col-12">
                        <div class="sw sw-arrows">
                            <ul class="nav-step">
                                <li class="nav-item"
                                    *ngFor="let item of constant.CustomerRequirementStatus; let i = index; let isLast = last">
                                    <a class="nav-link process-text" (click)="seclect(item, i)"
                                        [ngClass]="{'finish':i!=requirementModel.Status,'active':requirementModel.Status==i, 'select': i==indexNumber}">
                                        <strong>{{item.Name}}</strong>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <ng-container *ngIf="constant.CustomerRequirementStatus[indexNumber].Id == 0">
                    <div class="row">
                        <div class="col-lg-4 col-md-4 col-xs-4 col-sm-12">
                            <div class="form-group ">
                                <label class="form-label">Mã yêu cầu khách hàng
                                    <span class='text-danger text-strong'>&nbsp;*</span>
                                </label>
                                <div class="controls">
                                    <div class="controls">
                                        <input type="text" class="form-control" [(ngModel)]="requirementModel.Code"
                                            name="code" maxlength="200" disabled>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-4 col-xs-4 col-sm-12">
                            <div class="form-group ">
                                <label class="form-label">Tên yêu cầu khách hàng
                                    <span class='text-danger text-strong'>&nbsp;*</span>
                                </label>
                                <div class="controls">
                                    <input type="text" class="form-control" [(ngModel)]="requirementModel.Name"
                                        name="name" required>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-4 col-xs-4 col-sm-12">
                            <div class="form-group ">
                                <label class="form-label">Mã meeting
                                    <span class='text-danger text-strong'>&nbsp;</span>
                                </label>
                                <div class="controls">
                                    <div class="controls">
                                        <input type="text" class="form-control"
                                            [(ngModel)]="requirementModel.MeetingCode" name="meetingCode"
                                            maxlength="200" disabled>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-4 col-xs-4 col-sm-12">
                            <div class="form-group ">
                                <label class="form-label">Tên khách hàng
                                    <span class='text-danger text-strong'>&nbsp;*</span>
                                </label>
                                <div class="controls">
                                    <nts-drop-down [items]="listCustomer" [columns]="columnName" ntsValue="Id"
                                        ntsLabel="Name" ntsMode="single" ntsAutoClose="true"
                                        [(ngModel)]="requirementModel.CustomerId" name="CustomerId" required
                                        (change)="changeCustomer()">
                                    </nts-drop-down>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-4 col-xs-4 col-sm-12">
                            <div class="form-group ">
                                <label class="form-label">Mã khách hàng
                                    <span class='text-danger text-strong'></span>
                                </label>
                                <div class="controls">
                                    <input type="text" class="form-control" name="CustomerCode"
                                        [(ngModel)]="requirementModel.CustomerCode" disabled>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-4 col-xs-4 col-sm-12">
                            <div class="form-group ">
                                <label class="form-label">Người Liên hệ
                                    <span class='text-danger text-strong'>&nbsp;*</span>
                                </label>
                                <div class="controls">
                                    <nts-drop-down [items]="listCustomerContact" [columns]="columnNameCustomerContact"
                                        ntsValue="Id" ntsLabel="Name" ntsMode="single" ntsAutoClose="true"
                                        [(ngModel)]="requirementModel.CustomerContactId" name="CustomerContactId"
                                        required (change)="changeCustomerContact()">
                                    </nts-drop-down>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-4 col-xs-4 col-sm-12">
                            <div class="form-group ">
                                <label class="form-label">Chức vụ
                                    <span class='text-danger text-strong'></span>
                                </label>
                                <div class="controls">
                                    <input type="text" class="form-control" name="CustomerContactPosition"
                                        [(ngModel)]="requirementModel.CustomerContactPosition" disabled>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-4 col-xs-4 col-sm-12">
                            <div class="form-group ">
                                <label class="form-label">Số điện thoại liên hệ
                                    <span class='text-danger text-strong'></span>
                                </label>
                                <div class="controls">
                                    <input type="text" class="form-control" name="CustomerContactPhoneNumber"
                                        [(ngModel)]="requirementModel.CustomerContactPhoneNumber" disabled>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-4 col-xs-4 col-sm-12">
                            <div class="form-group ">
                                <label class="form-label">Email liên hệ
                                    <span class='text-danger text-strong'></span>
                                </label>
                                <div class="controls">
                                    <input type="text" class="form-control" name="CustomerContactEmail"
                                        [(ngModel)]="requirementModel.CustomerContactEmail" disabled>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-4 col-md-4 col-xs-4 col-sm-12">
                            <div class="form-group">
                                <label class="form-label">Loại yêu cầu
                                    <span class='text-danger text-strong'>&nbsp;</span>
                                </label>
                                <div class="controls">
                                    <select data-size="3" class="form-control"
                                        [(ngModel)]="requirementModel.RequestType" name="requestType">
                                        <option style="height: auto;"
                                            *ngFor="let item of listCustomerRequirementRequestType" [ngValue]="item.Id">
                                            {{item.Name}}
                                        </option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-4 col-md-4 col-xs-4 col-sm-12">
                            <div class="form-group">
                                <label class="form-label">Nguồn yêu cầu
                                    <span class='text-danger text-strong'>&nbsp;*</span>
                                </label>
                                <div class="controls">
                                    <select data-size="3" class="form-control"
                                        [(ngModel)]="requirementModel.RequestSource" name="RequestSource">
                                        <option style="height: auto;"
                                            *ngFor="let item of listCustomerRequirementRequestSource"
                                            [ngValue]="item.Id">
                                            {{item.Name}}
                                        </option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-4 col-md-4 col-xs-4 col-sm-12">
                            <div class="form-group ">
                                <label class="form-label">Phòng yêu cầu
                                    <span class='text-danger text-strong'>&nbsp;*</span>
                                </label>
                                <div class="controls">
                                    <nts-drop-down [items]="listDepartment" [columns]="columnNameDepartment"
                                        ntsValue="Id" ntsLabel="Name" ntsMode="single" ntsAutoClose="true"
                                        [(ngModel)]="requirementModel.DepartmentRequest" name="DepartmentRequest"
                                        required (change)="changeDepartmentRequest()">
                                    </nts-drop-down>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-4 col-md-4 col-xs-4 col-sm-12">
                            <div class="form-group ">
                                <label class="form-label">Người yêu cầu
                                    <span class='text-danger text-strong'>&nbsp;*</span>
                                </label>
                                <div class="controls">
                                    <nts-drop-down [items]="listEmployee" [columns]="columnNameEmployee" ntsValue="Id"
                                        ntsLabel="Name" ntsMode="single" ntsAutoClose="true"
                                        [(ngModel)]="requirementModel.Petitioner" name="NamePetitioner" required>
                                    </nts-drop-down>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-4 col-md-4 col-xs-4 col-sm-12">
                            <div class="form-group ">
                                <label class="form-label">Phòng tiếp nhận
                                    <span class='text-danger text-strong'>&nbsp;*</span>
                                </label>
                                <div class="controls">
                                    <nts-drop-down [items]="listDepartment" [columns]="columnNameDepartment"
                                        ntsValue="Id" ntsLabel="Name" ntsMode="single" ntsAutoClose="true"
                                        [(ngModel)]="requirementModel.DepartmentReceive" name="DepartmentReceive"
                                        required (change)="changeDepartmentReceive()">
                                    </nts-drop-down>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-4 col-md-4 col-xs-4 col-sm-12">
                            <div class="form-group ">
                                <label class="form-label">Người tiếp nhận
                                    <span class='text-danger text-strong'>&nbsp;</span>
                                </label>
                                <div class="controls">
                                    <nts-drop-down [items]="listEmployee1" [columns]="columnNameEmployee" ntsValue="Id"
                                        ntsLabel="Name" ntsMode="single" ntsAutoClose="true"
                                        [(ngModel)]="requirementModel.Reciever" name="NameReciever">
                                    </nts-drop-down>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-4 col-xs-4 col-sm-12">
                            <div class="form-group ">
                                <label class="form-label">Ngày hoàn thành thưc tế
                                    <span class='text-danger text-strong'>&nbsp;</span>
                                </label>
                                <div class="input-group">
                                    <input class="form-control" placeholder="dd/mm/yyyy" name="RealFinishDate"
                                        [(ngModel)]="requirementModel.RealFinishDate" ngbDatepicker
                                        #RealFinishDate="ngbDatepicker">
                                    <div class="input-group-append">
                                        <span class="dtp-icon" (click)="RealFinishDate.toggle()" name="RealFinishDate">
                                            <i class="far fa-calendar-alt" style="color: #999;"></i>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-4 col-md-4 col-xs-4 col-sm-12">
                            <div class="form-group">
                                <label class="form-label">Version
                                    <span class='text-danger text-strong'>&nbsp;</span>
                                </label>
                                <div class="controls">
                                    <input [(ngModel)]="requirementModel.Version" name="Version" rows="5"
                                        class="form-control">
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-4 col-md-4 col-xs-4 col-sm-12">
                            <div class="form-group">
                                <label class="form-label">Trạng thái
                                    <span class='text-danger text-strong'>&nbsp;</span>
                                </label>
                                <div class="controls">
                                    <select data-size="3" class="form-control" [(ngModel)]="requirementModel.Status"
                                        name="status">
                                        <option style="height: auto;"
                                            *ngFor="let item of listCustomerRequirementRequestStatus"
                                            [ngValue]="item.Id">
                                            {{item.Name}}
                                        </option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-4 col-md-4 col-xs-4 col-sm-12">
                            <div class="form-group ">
                                <label class="form-label">Ngân sách
                                    <span class='text-danger text-strong'></span>
                                </label>
                                <div class="controls">
                                    <input [disUipermission]="['F060201','F060202']" currencyMask
                                        [options]="{align:'left', prefix: '', thousands: ',', decimal: '.', precision:2  }"
                                        name="Budget" type="text" class="form-control"
                                        [(ngModel)]="requirementModel.Budget" maxlength="200">
                                </div>
                            </div>
                        </div>

                        <!-- <div class="col-lg-4 col-md-4 col-xs-4 col-sm-12">
                            <div class="form-group">
                                <label class="form-label">Yêu cầu của khách hàng
                                    <span class='text-danger text-strong'>&nbsp;</span>
                                </label>
                                <div class="controls">
                                    <textarea [(ngModel)]="requirementModel.Request" name="Request" rows="5"
                                        class="form-control"></textarea>
                                </div>
                            </div>
                        </div> -->

                        <div class="col-lg-4 col-md-4 col-xs-4 col-sm-12">
                            <div class="form-group ">
                                <label class="form-label">Thời gian cần hoàn thành giải pháp
                                    <span class='text-danger text-strong'>&nbsp;</span>
                                </label>
                                <div class="input-group">
                                    <input class="form-control" placeholder="dd/mm/yyyy" name="PlanFinishDate"
                                        [(ngModel)]="requirementModel.PlanFinishDate" ngbDatepicker
                                        #PlanFinishDate="ngbDatepicker">
                                    <div class="input-group-append">
                                        <span class="dtp-icon" (click)="PlanFinishDate.toggle()" name="PlanFinishDate">
                                            <i class="far fa-calendar-alt" style="color: #999;"></i>
                                        </span>
                                    </div>
                                </div>
                            </div>                                                
                            <div class="form-group">
                                <label class="form-label">Ghi chú
                                    <span class='text-danger text-strong'>&nbsp;</span>
                                </label>
                                <div class="controls">
                                    <textarea [(ngModel)]="requirementModel.Note" name="Note" rows="5"
                                        class="form-control"></textarea>
                                </div>
                            </div>                       
                        </div>

                        <div class="col-lg-4 col-md-4 col-xs-4 col-sm-12">
                            <div class="form-group ">
                                <label class="form-label">Thời điểm triển khai giải pháp
                                    <span class='text-danger text-strong'>&nbsp;</span>
                                </label>
                                <div class="input-group">
                                    <input class="form-control" placeholder="dd/mm/yyyy" name="StartDate"
                                        [(ngModel)]="requirementModel.StartDate" ngbDatepicker
                                        #StartDate="ngbDatepicker">
                                    <div class="input-group-append">
                                        <span class="dtp-icon" (click)="StartDate.toggle()" name="StartDate">
                                            <i class="far fa-calendar-alt" style="color: #999;"></i>
                                        </span>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Thời gian triển khai dự án
                                    <span class='text-danger text-strong'>&nbsp;</span>
                                </label>
                                <div class="controls">
                                    <input [(ngModel)]="requirementModel.Duration" name="Duration" rows="5"
                                        class="form-control">
                                </div>
                            </div>
                        </div>

                        <!-- <div class="col-lg-4 col-md-4 col-xs-4 col-sm-12">
                            <div class="form-group">
                                <label class="form-label">Ghi chú
                                    <span class='text-danger text-strong'>&nbsp;</span>
                                </label>
                                <div class="controls">
                                    <textarea [(ngModel)]="requirementModel.Note" name="Note" rows="5"
                                        class="form-control"></textarea>
                                </div>
                            </div>
                        </div> -->

                    </div>

                    <div class="row mt-3">
                        <div class="col-lg-12 col-md-12 col-sm-12">
                            <label>
                                Danh sách yêu cầu cần xử lý
                            </label>
                        </div>
                        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12">
                            <perfect-scrollbar [config]="constant.ScrollConfig" style="height:auto; width:100%;">
                                <table class="table table-bordered " style="word-wrap: break-word ;min-width:1100px;">
                                    <thead>
                                        <tr>
                                            <th width="50px" class="text-center">STT</th>
                                            <!-- <th width="50px" class="text-center">Xử lý</th> -->
                                            <th width="300px" class="text-center">Yêu cầu cần xử lý</th>
                                            <th width="300px" class="text-center">Phương án xử lý</th>
                                            <th width="150px" class="text-center">Thời điểm hoàn thành</th>
                                            <th min-width="150px" class="text-center">Ghi chú</th>
                                            <th width="150px" class="text-center">Người yêu cầu</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let row of requirementModel.ListContent; let i = index;">
                                            <td class="text-center" width="50px">{{i+1}}</td>
                                            <!-- <td class="text-center">
                                                <button type="button" class="btn btn-xs btn-danger" ngbTooltip="Xóa"
                                                    (click)="deleteContent(i)">
                                                    <span class="fas fa-times" aria-hidden="true"></span>
                                                </button>
                                            </td> -->
                                            <td>
                                                <textarea type="text" [(ngModel)]="row.Request" class="form-control"
                                                    [name]="'request' + i" rows="2"></textarea>
                                            </td>
                                            <td>
                                                <textarea type="text" [(ngModel)]="row.Solution" class="form-control"
                                                    [name]="'solution' + i" rows="2"></textarea>
                                            </td>
                                            <td>
                                                <div class="input-group">
                                                    <input container="body" class="form-control"
                                                        placeholder="dd/mm/yyyy" [name]="'finishDate' + i"
                                                        [(ngModel)]="row.FinishDate" ngbDatepicker
                                                        #finishDate="ngbDatepicker"
                                                        [minDate]="{year: 1900, month: 1, day: 1}"
                                                        [maxDate]="{year: 2100, month: 12, day: 31}">
                                                    <div class="input-group-append">
                                                        <span class="dtp-icon"
                                                            (click)="finishDate.toggle();$event.stopPropagation();">
                                                            <i class="far fa-calendar-alt" style="color: #999;"></i>
                                                        </span>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <textarea type="text" [(ngModel)]="row.Note" class="form-control"
                                                    [name]="'note' + i"></textarea>
                                            </td>
                                            <td>
                                                {{row.CreateByName}}
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </perfect-scrollbar>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-lg-6 col-md-6 col-sm-6">
                            <label>
                                Tài liệu đính kèm
                                <span class='text-danger text-strong'>&nbsp;</span>
                            </label>
                        </div>
                        <div class="col-lg-6 col-md-6 col-sm-12 text-right">
                            <button *appUipermission="['F110801','F110802']" class="btn btn-success btn-upload"
                                (click)="fileInput.click();">
                                <i class="fas fa-arrow-up"></i> &nbsp;Thêm tài liệu</button>
                            <input name="fileDataSheet" style="display: none;" type="file" id="fileDataSheet" #fileInput
                                (change)="uploadFile($event)" multiple />
                        </div>
                        <div class="col-md-12 col-sm-12 col-lg-12">
                            <perfect-scrollbar [config]="constant.ScrollXConfig" style=" height:auto; width:100%;">
                                <table class="table table-bordered" style="min-width:1130px">
                                    <thead>
                                        <tr>
                                            <th width="50px" class="text-center">STT</th>
                                            <th width="80px" class="text-center">Xử lý</th>
                                            <th width="200px" class="text-center">Tên </th>
                                            <th width="300px" class="text-center">Loại</th>
                                            <th min-width="200px" class="text-center">Cần lưu ý</th>
                                            <th width="200px" class="text-center">Tên file</th>
                                            <th width="100px" class="text-center">Dung lượng</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <ng-container *ngFor="let row of requirementModel.ListAttach; let i = index">
                                            <tr *ngIf="!row.IsDelete">
                                                <td class="text-center">{{i+1}}</td>
                                                <td class="text-center">
                                                    <ng-container *ngIf="row.FilePath">
                                                        <button type="button" (click)="downloadAFile(row)"
                                                            style="background-color: papayawhip" class="btn btn-xs"
                                                            placement="top" ngbTooltip="Download" container="body">
                                                            <span class="fas fa-download" aria-hidden="true"
                                                                style="color: black"></span>
                                                        </button>&nbsp;
                                                    </ng-container>
                                                    <button type="button" class="btn btn-xs btn-danger" ngbTooltip="Xóa"
                                                        (click)="showConfirmDeleteFile(row,i,1)">
                                                        <span class="fas fa-times" aria-hidden="true"></span>
                                                    </button>
                                                </td>
                                                <td>
                                                    <input type="text" [(ngModel)]="row.Name" class="form-control"
                                                        [name]="'names' + i">
                                                </td>
                                                <td>
                                                    <select data-size="3" class="form-control" [(ngModel)]="row.Type"
                                                        [name]="'CustomerRequirementType' + i">
                                                        <option style="height: auto;"
                                                            *ngFor="let item of listCustomerRequirementType"
                                                            [ngValue]="item.Id">
                                                            {{item.Name}}
                                                        </option>
                                                    </select>
                                                </td>
                                                <td>
                                                    <textarea type="text" [(ngModel)]="row.Note" class="form-control"
                                                        [name]="'Notes' + i" rows="1"></textarea>
                                                </td>
                                                <td>
                                                    {{row.FileName}}
                                                </td>
                                                <td class="text-center">
                                                    {{row.FileSize / (1024*1024)| number: '1.1-3'}} MB
                                                </td>
                                            </tr>
                                        </ng-container>
                                    </tbody>
                                </table>
                            </perfect-scrollbar>
                        </div>
                    </div>
                </ng-container>
                <ng-container *ngIf="constant.CustomerRequirementStatus[indexNumber].Id == 1">
                    <div class="row">
                        <div class="col-lg-6 col-md-6 col-xs-6 col-sm-12">
                            <div class="form-group">
                                <label class="form-label"> Đối thủ cạnh tranh
                                    <span class='text-danger text-strong'>&nbsp;</span>
                                </label>
                                <div class="controls">
                                    <textarea [(ngModel)]="requirementModel.Competitor" name="Competitor" rows="5"
                                        class="form-control"></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6 col-xs-6 col-sm-12">
                            <div class="form-group">
                                <label class="form-label"> Nhà cung cấp hiện tại của khách hàng
                                    <span class='text-danger text-strong'>&nbsp;</span>
                                </label>
                                <div class="controls">
                                    <textarea [(ngModel)]="requirementModel.CustomerSupplier" name="CustomerSupplier"
                                        rows="5" class="form-control"></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6 col-xs-6 col-sm-12">
                            <div class="form-group">
                                <label class="form-label">Mức độ ưu tiên
                                    <span class='text-danger text-strong'>&nbsp;</span>
                                </label>
                                <div class="controls">
                                    <select data-size="3" class="form-control"
                                        [(ngModel)]="requirementModel.PriorityLevel" name="PriorityLevel">
                                        <option style="height: auto;" *ngFor="let item of PriorityLevel"
                                            [ngValue]="item.Id">
                                            {{item.Name}}
                                        </option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6 col-xs-6 col-sm-12">
                            <div class="form-group">
                                <label class="form-label">Thuộc giai đoạn
                                    <span class='text-danger text-strong'>&nbsp;*</span>
                                </label>
                                <div class="controls">
                                    <nts-drop-down-tree [disUipermission]="['F000102','F000104','F000101']"
                                        [items]="listProjectPhase" [columns]="columnName" ntsParentId="ParentId"
                                        ntsValue="Id" ntsLabel="Code" ntsMode="single" ntsAutoClose="true"
                                        [(ngModel)]="requirementModel.ProjectPhaseId" name="ProjectPhaseId" required>
                                    </nts-drop-down-tree>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6 col-xs-6 col-sm-12">
                            <div class="form-group">
                                <label class="form-label">Nội dung đánh giá 1
                                </label>
                                <div class="controls">
                                    <input type="text" class="form-control" name="content1"
                                        [(ngModel)]="requirementModel.Content1" >
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-2 col-md-2 col-xs-2 col-sm-12">
                            <div class="form-group">
                                <label class="form-label">Kết luận 1
                                </label>
                                <div class="controls">
                                    <ng-container>
                                        <label class="radio">Làm
                                            <input type="radio" name="conclude1"
                                                [(ngModel)]="requirementModel.Conclude1" [value]="true">
                                            <span class="checkround"></span>
                                        </label>&nbsp;&nbsp;
                                        <label class="radio">Không làm
                                            <input type="radio" name="conclude1"
                                                [(ngModel)]="requirementModel.Conclude1" [value]="false">
                                            <span class="checkround"></span>
                                        </label>
                                    </ng-container>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-4 col-xs-4 col-sm-12">
                            <div class="form-group">
                                <label class="form-label">Người đánh giá 1
                                </label>
                                <div class="controls">
                                    <nts-drop-down-tree 
                                        [items]="requirementModel.listEmployee" [columns]="columnNameEmployee" ntsParentId="ParentId"
                                        ntsValue="Id" ntsLabel="Name" ntsMode="single" ntsAutoClose="true"
                                        [(ngModel)]="requirementModel.Person1" name="person1" >
                                    </nts-drop-down-tree>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6 col-xs-6 col-sm-12">
                            <div class="form-group">
                                <label class="form-label">Nội dung đánh giá 2
                                </label>
                                <div class="controls">
                                    <input type="text" class="form-control" name="content2"
                                        [(ngModel)]="requirementModel.Content2" >
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-2 col-md-2 col-xs-2 col-sm-12">
                            <div class="form-group">
                                <label class="form-label">Kết luận 2
                                </label>
                                <div class="controls">
                                    <ng-container>
                                        <label class="radio">Làm
                                            <input type="radio" name="conclude2"
                                                [(ngModel)]="requirementModel.Conclude2" [value]="true">
                                            <span class="checkround"></span>
                                        </label>&nbsp;&nbsp;
                                        <label class="radio">Không làm
                                            <input type="radio" name="conclude2"
                                                [(ngModel)]="requirementModel.Conclude2" [value]="false">
                                            <span class="checkround"></span>
                                        </label>
                                    </ng-container>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-4 col-xs-4 col-sm-12">
                            <div class="form-group">
                                <label class="form-label">Người đánh giá 2
                                </label>
                                <div class="controls">
                                    <nts-drop-down-tree 
                                        [items]="requirementModel.listEmployee" [columns]="columnNameEmployee" ntsParentId="ParentId"
                                        ntsValue="Id" ntsLabel="Name" ntsMode="single" ntsAutoClose="true"
                                        [(ngModel)]="requirementModel.Person2" name="person2" >
                                    </nts-drop-down-tree>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6 col-xs-6 col-sm-12">
                            <div class="form-group">
                                <label class="form-label">Nội dung đánh giá 3
                                </label>
                                <div class="controls">
                                    <input type="text" class="form-control" name="content3"
                                        [(ngModel)]="requirementModel.Content3" >
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-2 col-md-2 col-xs-2 col-sm-12">
                            <div class="form-group">
                                <label class="form-label">Kết luận 3
                                </label>
                                <div class="controls">
                                    <ng-container>
                                        <label class="radio">Làm
                                            <input type="radio" name="conclude3"
                                                [(ngModel)]="requirementModel.Conclude3" [value]="true">
                                            <span class="checkround"></span>
                                        </label>
                                        &nbsp;&nbsp;
                                        <label class="radio">Không làm
                                            <input type="radio" name="conclude3"
                                                [(ngModel)]="requirementModel.Conclude3" [value]="false">
                                            <span class="checkround"></span>
                                        </label>
                                    </ng-container>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-4 col-xs-4 col-sm-12">
                            <div class="form-group">
                                <label class="form-label">Người đánh giá 3
                                </label>
                                <div class="controls">
                                    <nts-drop-down-tree 
                                        [items]="requirementModel.listEmployee" [columns]="columnNameEmployee" ntsParentId="ParentId"
                                        ntsValue="Id" ntsLabel="Name" ntsMode="single" ntsAutoClose="true"
                                        [(ngModel)]="requirementModel.Person3" name="person3" >
                                    </nts-drop-down-tree>
                                </div>
                            </div>
                        </div>
                    </div>
                </ng-container>
                <br>
                <ng-container *ngIf="constant.CustomerRequirementStatus[indexNumber].Id == 1">
                    <div class="row">
                        <div class="col-md-12 col-sm-12 col-lg-12">
                            <h4>Danh sách meeting</h4>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12 col-sm-12 col-lg-12">
                            <perfect-scrollbar [config]="constant.ScrollXConfig" style="height:auto; width:100%;">
                                <table class="table table-bordered" style="min-width:3690px">
                                    <thead>
                                        <tr>
                                            <th width="50px" class="text-center">STT</th>
                                            <!-- <th width="80px" class="text-center">Xử lý</th> -->
                                            <th width="200px" class="text-center">Quy trình</th>
                                            <th width="200px" class="text-center">Trạng thái</th>
                                            <th width="200px" class="text-center">Tên meeting</th>
                                            <th width="150px" class="text-center">Mã meeting</th>
                                            <th width="200px" class="text-center">Loại meeting</th>
                                            <th width="150px" class="text-center">Chủng loại meeting</th>
                                            <th width="150px" class="text-center">Mã khách hàng</th>
                                            <th width="200px" class="text-center">Tên khách hàng</th>
                                            <th width="120px" class="text-center">Số điện thoại</th>
                                            <th width="200px" class="text-center">Email</th>
                                            <th width="200px" class="text-center">Địa điểm</th>
                                            <th width="200px" class="text-center">Thời gian bắt đầu dự kiến</th>
                                            <th width="200px" class="text-center">Thời gian kết thúc dự kiến</th>
                                            <th width="200px" class="text-center">Thời gian bắt đầu thực tế</th>
                                            <th width="200px" class="text-center">Thời gian kết thúc thực tế</th>
                                            <th width="100px" class="text-center">Thời lượng</th>
                                            <th min-width="200px" class="text-center">Thông tin chung</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let row of listData; let i = index">
                                            <td class="text-center">{{i+1}}</td>
                                            <!-- <td class="text-center">
                                            <a type="button" class="btn btn-xs btn-warning" placement="top"
                                                ngbTooltip="Cập nhật" container="body"
                                                [routerLink]="['/giai-phap/meeting/chinh-sua/'+ row.Id]"
                                                *appUipermission="['F120802']">
                                                <span class="fa fa-edit" aria-hidden="true"></span>
                                            </a>&nbsp;
                                            <button class="btn btn-xs btn-danger"
                                                (click)="showConfirmDelete(row.Id)" placement="top" ngbTooltip="Xóa"
                                                container="body">
                                                <span class="fas fa-times" aria-hidden="true"></span>
                                            </button>
                                        </td> -->
                                            <td>
                                                <div class="sw sw-arrows sw-sm">
                                                    <ul class="nav-step">
                                                        <li class="nav-item"
                                                            *ngFor="let item of constant.MeetingStep; let i = index;">
                                                            <a class="nav-link process-text"
                                                                [ngClass]="{'finish':i<row.Step,'active':row.Step==i}">
                                                                <span>{{i+1}}</span>
                                                            </a>
                                                        </li>
                                                    </ul>
                                                </div>
                                                <div *ngIf="row.Step< constant.MeetingStep.length; else elseBlock">
                                                    [{{row.Step + 1}}/{{constant.MeetingStep.length}}]
                                                    {{constant.MeetingStep[row.Step].Name}}
                                                </div>
                                                <ng-template #elseBlock>
                                                    Hoàn thành
                                                </ng-template>
                                            </td>
                                            <td class="text-center">
                                                <nts-status-badge [items]="constant.MeetingStatus" [value]="row.Status">
                                                </nts-status-badge>
                                            </td>
                                            <td>{{row.Name}}</td>
                                            <td class="text-center">{{row.Code}}</td>
                                            <td class="text-center">
                                                <nts-status-badge [items]="constant.MeetingType" [value]="row.Type">
                                                </nts-status-badge>
                                            </td>
                                            <td class="text-center">{{row.MeetingTypeName}}</td>
                                            <td class="text-center">
                                                {{row.CustomerCode}}
                                            </td>
                                            <td>{{row.CustomerName}}</td>
                                            <td class="text-center">{{row.PhoneNumber}}</td>
                                            <td>{{row.Email}}</td>
                                            <td>{{row.Address}}</td>
                                            <td class="text-center">{{row.StartTime}}</td>
                                            <td class="text-center">{{row.EndTime}}</td>
                                            <td class="text-center">{{row.RealStartTime}}</td>
                                            <td class="text-center">
                                                {{row.RealEndTime}}
                                            </td>
                                            <td class="text-center">
                                                {{row.Time}}
                                            </td>
                                            <td>{{row.Description}}</td>
                                        </tr>
                                    </tbody>
                                    <tfoot *ngIf="listData.length == 0">
                                        <tr class="bold">
                                            <td colspan="11" min-width="3490px" class="text-center"
                                                style="height: 300px; font-size: 20px;">Không
                                                có dữ liệu</td>
                                        </tr>
                                    </tfoot>
                                </table>
                            </perfect-scrollbar>
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-left">
                            <h4>Danh mục giải pháp</h4>
                        </div>
                        <!-- <div class="col-lg-6 col-md-6 col-sm-12 text-right">
                            <button type="button" class="btn btn-success" container="body"
                                (click)="showChooseSolution()">
                                <i class="fa fa-plus"></i>
                                Thêm mới
                            </button>
                        </div> -->
                        <div class="col-xl-12 col-md-12 col-sm-12 col-xs-12">
                            <perfect-scrollbar [config]="constant.ScrollXConfig" style="height:auto; width:100%;">
                                <table name="tableSolution" class="table table-bordered" style="min-width:2040px">
                                    <thead>
                                        <tr>
                                            <th width="50px" class="text-center">STT</th>
                                            <!-- <th width="150px" class="text-center">Xử lý</th> -->
                                            <th width="100px" class="text-center">Trạng thái</th>
                                            <th width="200px" class="text-center">Tên giải pháp</th>
                                            <th width="200px" class="text-center">Mã giải pháp</th>
                                            <th width="200px" class="text-center">Mã dự án</th>
                                            <th width="200px" class="text-center">Tên dự án</th>
                                            <th width="150px" class="text-center">Khách hàng</th>
                                            <th width="150px" class="text-center">Khách hàng cuối</th>
                                            <th width="200px" class="text-center">Người phụ trách kinh doanh</th>
                                            <th width="160px" class="text-center">Người làm giải pháp</th>
                                            <th width="100px" class="text-center">Giá</th>
                                            <th width="130px" class="text-center">Ngày hoàn thành</th>
                                            <th min-width="200px" class="text-center">Mô tả</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let row of listSolution; let i = index " >
                                            <ng-container *ngIf="row.IsDelete == false">
                                                <td class="text-center">{{i+1}}</td>
                                                <!-- <td class="text-center">
                                                    <button class="btn btn-xs btn-danger "
                                                        (click)="showConfirmDeleteSolution(i,row.Id)" placement="top"
                                                        ngbTooltip="Xóa" container="body">
                                                        <span class="fas fa-times" aria-hidden="true"></span>
                                                    </button> &nbsp;
                                                    <button *ngIf="row.StatusRequirementSolution =='Hủy'"
                                                        class="btn btn-xs btn-success "
                                                        (click)="acceptSolution(i,row.Id)" placement="top"
                                                        ngbTooltip="Chốt" container="body">
                                                        <span class="fas fa-plus" aria-hidden="true"></span>
                                                    </button>
                                                    <button *ngIf="row.StatusRequirementSolution == 'Chốt'"
                                                        class="btn btn-xs btn-warning "
                                                        (click)="rejectSolution(i,row.Id)" placement="top"
                                                        ngbTooltip="Hủy" container="body">
                                                        <span class="fas fa-minus" aria-hidden="true"></span>
                                                    </button>
                                                    <button *ngIf="row.StatusRequirementSolution ==''"
                                                        class="btn btn-xs btn-success "
                                                        (click)="acceptSolution(i,row.Id)" placement="top"
                                                        ngbTooltip="Chốt" container="body">
                                                        <span class="fas fa-plus" aria-hidden="true"></span>
                                                    </button> &nbsp;
                                                    <button *ngIf="row.StatusRequirementSolution == ''"
                                                        class="btn btn-xs btn-warning "
                                                        (click)="rejectSolution(i,row.Id)" placement="top"
                                                        ngbTooltip="Hủy" container="body">
                                                        <span class="fas fa-minus" aria-hidden="true"></span>
                                                    </button>
                                                </td> -->
                                                <td class="text-center">
                                                    <span *ngIf="row.StatusRequirementSolution =='Chốt'"
                                                        class="badge badge-success">{{row.StatusRequirementSolution}}
                                                    </span>
                                                    <span *ngIf="row.StatusRequirementSolution == 'Hủy'"
                                                        class="badge badge-danger">{{row.StatusRequirementSolution}}
                                                    </span>
                                                </td>
                                                <td>{{row.Name}}</td>
                                                <td>{{row.Code}}</td>
                                                <td>{{row.ProjectCode}}</td>
                                                <td>{{row.ProjectName}}</td>
                                                <td>{{row.CustomerName}}</td>
                                                <td>{{row.EndCustomerName}}</td>
                                                <td>{{row.TPAUName}}</td>
                                                <td>{{row.SolutionMakerName}}</td>
                                                <td class="text-right">{{row.Price|number:'1.0-0'}}</td>
                                                <td class="text-center">{{row.FinishDate|date:'dd/MM/yyyy'}}</td>
                                                <td>{{row.Description}}</td>
                                            </ng-container>
                                        </tr>
                                    </tbody>
                                </table>
                            </perfect-scrollbar>
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-left">
                            <h4>Danh sách dự án đã làm</h4>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xl-12 col-md-12 col-sm-12 col-lg-12">
                            <perfect-scrollbar [config]="constant.ScrollXConfig" style="height:auto; width:100%;">
                                <table class="table table-bordered" style="min-width:2600px">
                                    <thead>
                                        <tr>
                                            <th width="50px" class="text-center">STT</th>
                                            <!-- <th width="150px" class="text-center">Xử lý</th> -->
                                            <th width="100px" class="text-center">Mức độ ưu tiên dự án</th>
                                            <th width="100px" class="text-center">Loại dự án</th>
                                            <th width="190px" class="text-center">Trạng thái dự án</th>
                                            <th width="120px" class="text-center">Mã dự án</th>
                                            <th min-width="180px" class="text-center">Tên dự án</th>
                                            <th width="120px" class="text-center">Tài liệu</th>
                                            <th width="80px" class="text-center">Giải pháp</th>
                                            <th width="150px" class="text-center">Biên bản chuyển giao</th>
                                            <th width="180px" class="text-center">Tên SBU</th>
                                            <th width="150px" class="text-center">Tên phòng ban</th>
                                            <th width="150px" class="text-center">Loại khách hàng</th>
                                            <th width="180px" class="text-center">Tên khách hàng</th>
                                            <th width="100px" class="text-center">Ngày Kickoff</th>
                                            <th width="100px" class="text-center">Ngày bắt đầu</th>
                                            <th width="100px" class="text-center">Ngày kết thúc</th>
                                            <th width="150px" class="text-center">Chi phí chuyển giao (FCM)</th>
                                            <th width="150px" class="text-center">Giá bán thực tế chưa VAT</th>
                                            <th width="100px" class="text-center">Mã kho</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let row of listProject; let i = index">
                                            <td class="text-center">{{startIndex+i}}</td>
                                            <!-- <td style="text-align: center">
                                                <button type="button"
                                                    class="btn btn-xs btn-info" (click)="showProject(row.Id)"
                                                    placement="top" ngbTooltip="Xem thông tin" container="body">
                                                    <span class="far fa-eye" aria-hidden="true"></span>
                                                </button>&nbsp;
                                                <a *appUipermission="['F060002','F060004','F060005']" type="button"
                                                    [routerLink]="['/du-an/quan-ly-du-an/chinh-sua/'+ row.Id]"
                                                    class="btn btn-xs btn-warning" placement="top" ngbTooltip="Cập nhật"
                                                    container="body">
                                                    <span class="fa fa-edit" aria-hidden="true"></span>
                                                </a>&nbsp;
                                                <button *appUipermission="['F060003']" class="btn btn-xs btn-danger"
                                                    (click)="showConfirmDelete(row.Id)" placement="top" ngbTooltip="Xóa"
                                                    container="body">
                                                    <span class="fas fa-times" aria-hidden="true"></span>
                                                </button>&nbsp;
                                            </td> -->
                                            <td class="text-center">
                                                <nts-status-badge [items]="constant.ProjectPriority"
                                                    [value]="row.Priority"></nts-status-badge>
                                            </td>
                                            <td class="text-center">
                                                <nts-status-badge [items]="constant.ProjectTypes" [value]="row.Type">
                                                </nts-status-badge>
                                            </td>

                                            <td class="text-center">
                                                <nts-status-badge [items]="constant.ProjectStatus" [value]="row.Status">
                                                </nts-status-badge>
                                            </td>
                                            <td class="text-center" [ngbTooltip]="row.Code" container="body">
                                                {{row.Code}}</td>
                                            <td [ngbTooltip]="row.Name" container="body">{{row.Name}}</td>
                                            <td class="text-center">
                                                <nts-status-badge [value]="row.DocumentStatus"
                                                    [items]="constant.ProjectDocumentStatus"></nts-status-badge>
                                            </td>
                                            <td class="text-center">
                                                <span *ngIf="row.IsSolution==false"
                                                    class="badge badge-danger">Không</span>
                                                <span *ngIf="row.IsSolution==true" class="badge badge-success">Có</span>
                                            </td>
                                            <td class="text-center">
                                                <span *ngIf="row.IsTransfer==false"
                                                    class="badge badge-danger">Không</span>
                                                <span *ngIf="row.IsTransfer==true" class="badge badge-success">Có</span>
                                            </td>
                                            <td [ngbTooltip]="row.SBUName" container="body"> {{row.SBUName}}</td>
                                            <td [ngbTooltip]="row.DepartmentName" container="body">
                                                {{row.DepartmentName}}</td>
                                            <td [ngbTooltip]="row.CustomerType" container="body">{{row.CustomerType}}
                                            </td>
                                            <td [ngbTooltip]="row.CustomerName" container="body">{{row.CustomerName}}
                                            </td>
                                            <td class="text-center">{{row.KickOffDate|date:'dd/MM/yyyy'}}</td>
                                            <td class="text-center">{{row.DateFrom |date:'dd/MM/yyyy'}}</td>
                                            <td class="text-center">{{row.DateTo|date:'dd/MM/yyyy' }}</td>
                                            <td class="text-right">{{row.FCMPrice|number:'1.0-0'}}</td>
                                            <td class="text-right">{{row.SaleNoVAT|number:'1.0-0'}}</td>
                                            <td>{{row.WarehouseCode}}</td>
                                        </tr>
                                    </tbody>
                                    <tfoot *ngIf="listProject.length == 0">
                                        <tr class="bold">
                                            <td colspan="16" min-width="300px" class="text-center"
                                                style="height: 300px; font-size: 20px;">Không có dữ liệu</td>
                                        </tr>
                                    </tfoot>
                                </table>
                            </perfect-scrollbar>
                        </div>
                    </div>
                </ng-container>
                <ng-container *ngIf="constant.CustomerRequirementStatus[indexNumber].Id == 2">
                    <div class="row">
                        <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 text-left">
                            <h4>Khảo sát khách hàng</h4>
                        </div>
                        <div class="col-lg-6 col-md-6 col-sm-12 text-right">
                            <button type="button" class="btn btn-success" (click)="showCreateUpdate('','',true)"
                                container="body">
                                <i class="fa fa-plus"></i>
                                Thêm mới
                            </button>
                        </div>
                        <div class="col-lg-12 col-md-12 col-sm-12">
                            <perfect-scrollbar [config]="constant.ScrollXConfig" style="height:auto; width:100%;">
                                <table class="table table-bordered table-fixed" style="min-width:900px">
                                    <thead>
                                        <tr>
                                            <th width="40px" class="text-center">STT</th>
                                            <th width="80px" class="text-center">Xử lý </th>
                                            <th width="200px" class="text-center">Thứ tự lượt khảo sát</th>
                                            <th min-width="200px" class="text-center">Ngày khảo sát</th>
                                            <th min-width="200px" class="text-center">Thời gian khảo sát (giờ)</th>
                                            <th width="150px" class="text-center">Nội dung</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let row of listSurvey; let i = index;">
                                            <td class="text-center">{{i+1}}</td>
                                            <td style="text-align: center">
                                                <button *appUipermission="['F060201','F060202']" type="button"
                                                    (click)='updateSurvey(row.Id,i)' class="btn btn-xs btn-warning"
                                                    placement="bottom" ngbTooltip="Cập nhật" container="body">
                                                    <span class="fa fa-edit" aria-hidden="true"></span>
                                                </button>&nbsp;
                                                <button *appUipermission="['F060201','F060202']"
                                                    class="btn btn-xs btn-danger"
                                                    (click)="showConfirmDeleteSurvey(row.Id,i)" ngbTooltip="Xóa"
                                                    placement="bottom">
                                                    <span class="fas fa-times" aria-hidden="true"></span>
                                                </button>
                                            </td>
                                            <td>{{row.Level}}</td>
                                            <td>{{row.SurveyDate|date:'dd/MM/yyyy'}}</td>
                                            <td>{{row.Times}}</td>
                                            <td>
                                                <a type="button" class="btn btn-xs btn-warning" placement="top"
                                                    ngbTooltip="Nội dung khảo sát" container="body"
                                                    [routerLink]="['/giai-phap/yeu-cau-khach-hang/khao-sat/noi-dung/'+ row.Id]">
                                                    <span class="fa fa-edit" aria-hidden="true"></span>
                                                </a>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </perfect-scrollbar>
                        </div>
                    </div>
                </ng-container>
                <ng-container *ngIf="constant.CustomerRequirementStatus[indexNumber].Id == 3">
                    <div class="row">
                        <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 text-left">
                            <h4>Dự toán sơ bộ</h4>
                        </div>
                        <div class="col-lg-6 col-md-6 col-sm-12 text-right">
                            <button type="button" class="btn btn-success" (click)="showCreateUpdateMaterial('')"
                                container="body">
                                <i class="fa fa-plus"></i>
                                Thêm mới
                            </button> &nbsp;
                            <button type="button" class="btn btn-success" (click)="showSelectMaterial()"
                                container="body">
                                <i class="fa fa-hand-pointer"></i>
                                Chọn dự toán sơ bộ
                            </button>
                        </div>
                        <div class="col-md-12 col-sm-12 col-lg-12">
                            <perfect-scrollbar [config]="constant.ScrollXConfig" style="height:auto; width:100%;">
                                <table class="table table-bordered table-fixed" style="min-width:2050px">
                                    <thead>
                                        <tr>
                                            <th width="70px" class="text-center">STT</th>
                                            <th width="100px" class="text-center">Xử lý </th>
                                            <th width="150px" class="text-center">Thời gian giao hàng</th>
                                            <th width="200px" class="text-center">Nhóm vật tư </th>
                                            <th width="200px" class="text-center">Mã hãng sản xuất</th>
                                            <th width="250px" class="text-center">Mã vật tư/ thiết bị </th>
                                            <th min-width="200px" class="text-center">Tên vật tư/ thiết bị</th>
                                            <th width="300px" class="text-center">Ghi chú</th>
                                            <th width="140px" class="text-center">Giá</th>
                                            <th width="80px" class="text-center">Số lượng</th>
                                            <th width="140px" class="text-center">Thành tiền</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let row of requirementModel.ListEstimate; let i = index">
                                            <td class="text-center" width="50px">{{i+1}}</td>
                                            <td width="70px" class="text-center">
                                                <button class="btn btn-xs btn-danger"
                                                    (click)="showConfirmDeleteSolutionMaterial(i,row.Id)"
                                                    placement="top" ngbTooltip="Xóa" container="body">
                                                    <span class="fas fa-times" aria-hidden="true"></span>
                                                </button>
                                            </td>
                                            <td>
                                                <div class="input-group">
                                                    <input container="body" class="form-control"
                                                        placeholder="dd/mm/yyyy" [name]="'DeliveryTime'+i"
                                                        [(ngModel)]="row.DeliveryTimeV" ngbDatepicker
                                                        #DeliveryTime="ngbDatepicker" container='body' required>
                                                    <div class="input-group-append">
                                                        <span class="dtp-icon" (click)="DeliveryTime.toggle()">
                                                            <i class="far fa-calendar-alt" style="color: #999;"></i>
                                                        </span>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>{{row.MaterialGroupName}}</td>
                                            <td>{{row.ManufactureCode}}</td>
                                            <td>{{row.Code}}</td>
                                            <td>{{row.Name}}</td>

                                            <td class="text-center">
                                                <input type="text" [(ngModel)]="row.Note" class="form-control"
                                                    [name]="'Note'+i">
                                            </td>
                                            <td class="text-right">{{row.Pricing | number:'1.0-0'}}</td>
                                            <td width="150px"><input type="text" ntsNumberInt [(ngModel)]="row.Quantity"
                                                    class="form-control" [name]="'Quantity'+i"></td>
                                            <td width="150px" class="text-right">
                                                {{(row.Pricing*row.Quantity)|number:'1.0-0'}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </perfect-scrollbar>
                        </div>

                    </div>
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12">
                            <h4> Danh sách rủi ro</h4>
                        </div>
                        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12">
                            <perfect-scrollbar [config]="constant.ScrollConfig" style="height:auto; width:100%;">
                                <table class="table table-bordered " style="word-wrap: break-word ;min-width:850px;">
                                    <thead>
                                        <tr>
                                            <th width="70px" class="text-center">STT</th>
                                            <th width="100px" class="text-center">Xử lý</th>
                                            <th min-width="300px" class="text-center">Tên rủi ro </th>
                                            <th width="300px" class="text-center">Mức độ đánh giá</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr
                                            *ngFor="let row of requirementModel.ListSolutionAnalysisRisk; let i = index;">
                                            <td class="text-center" width="50px">{{i+1}}</td>
                                            <td class="text-center">
                                                <button type="button" class="btn btn-xs btn-danger" ngbTooltip="Xóa"
                                                    (click)="deleteSolutionAnalysisRisk(i)">
                                                    <span class="fas fa-times" aria-hidden="true"></span>
                                                </button>
                                            </td>
                                            <td>
                                                <input type="text" [(ngModel)]="row.Name" class="form-control"
                                                    [name]="'solutionName' + i">
                                            </td>
                                            <td>
                                                <select [disUipermission]="['F080001']" class="form-control"
                                                    [(ngModel)]="row.Level" [name]="'Level' + i">
                                                    <option value="1">Rất cao</option>
                                                    <option value="2">Cao</option>
                                                    <option value="3">Trung Bình</option>
                                                </select>
                                            </td>

                                        </tr>
                                        <tr>
                                            <td class="text-center" width="50px"></td>
                                            <td class="text-center">
                                                <button type="button" class="btn btn-xs btn-success"
                                                    ngbTooltip="Thêm dòng" (click)="addRow()">
                                                    <i class="fa fa-plus"></i>
                                                </button>
                                            </td>
                                            <td>
                                                <input type="text" [(ngModel)]="solutionAnalysisRiskModel.Name"
                                                    class="form-control" name="SolutionName">
                                            </td>
                                            <td>
                                                <select [disUipermission]="['F080001']" class="form-control"
                                                    [(ngModel)]="solutionAnalysisRiskModel.Level" name="Level">
                                                    <option value="1">Rất cao</option>
                                                    <option value="2">Cao</option>
                                                    <option value="3">Trung Bình</option>
                                                </select>
                                            </td>

                                        </tr>
                                    </tbody>
                                </table>
                            </perfect-scrollbar>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 text-left">
                            <h4> Danh sách sản phẩm tương tự</h4>
                        </div>
                        <div class="col-lg-6 col-md-6 col-sm-12 text-right">
                            <button type="button" class="btn btn-success" (click)="showCreateUpdateProduct('')"
                                container="body">
                                <i class="fa fa-plus"></i>
                                Thêm mới
                            </button> &nbsp;
                            <button type="button" class="btn btn-success" (click)="showCreateUpdateAnalysisProduct('')"
                                container="body">
                                <i class="fa fa-hand-pointer"></i>
                                Chọn sản phẩm
                            </button>
                        </div>
                        <div class="col-lg-12 col-md-12 col-sm-12">
                            <perfect-scrollbar [config]="constant.ScrollConfig" style="height:auto; width:100%;">
                                <table class="table table-bordered" style="min-width:850px">
                                    <thead>
                                        <tr>
                                            <th width="70px" class="text-center">STT</th>
                                            <th width="100px" class="text-center">Xử lý</th>
                                            <th width="300px" class="text-center">Mã vật tư/ thiết bị</th>
                                            <th min-width="200px" class="text-center">Tên vật tư/ thiết bị</th>
                                            <th min-width="200px" class="text-center">Link tham khảo</th>
                                            <th min-width="200px" class="text-center">Hãng sản xuất</th>

                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let row of requirementModel.ListProduct; let i = index">
                                            <td width="50px" class="text-center">{{1 + i}}</td>
                                            <td width="100px" style="text-align: center">
                                                <button class="btn btn-xs btn-danger"
                                                    (click)="showConfirmDeleteSolutionProduct(i,row.Id)" placement="top"
                                                    ngbTooltip="Xóa" container="body">
                                                    <span class="fas fa-times" aria-hidden="true"></span>
                                                </button>
                                            </td>
                                            <td width="100px">{{row.Code}}</td>
                                            <td width="200px">{{row.Name}}</td>
                                            <td width="200px"><a href="{{row.Link}}" target="_blank">{{row.Link}}</a>
                                            </td>
                                            <td width="200px">{{row.ManufactureName}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </perfect-scrollbar>
                        </div>
                    </div>


                    <div class="row">
                        <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 text-left">
                            <h4>Nhà cung cấp</h4>
                        </div>
                        <div class="col-lg-6 col-md-6 col-sm-12 text-right">
                            <button type="button" class="btn btn-success" (click)="showCreateUpdateSupplier('')"
                                container="body">
                                <i class="fa fa-plus"></i>
                                Thêm mới
                            </button> &nbsp;
                            <button type="button" class="btn btn-success" (click)="showSelectSupplier()"
                                container="body">
                                <i class="fa fa-hand-pointer"></i>
                                Chọn nhà cung cấp
                            </button>
                        </div>
                        <div class="col-md-12 col-sm-12 col-lg-12">
                            <perfect-scrollbar [config]="constant.ScrollXConfig" style="height:auto; width:100%;">
                                <table class="table table-bordered table-fixed" style="min-width:1250px">
                                    <thead>
                                        <tr>
                                            <th width="70px" class="text-center">STT</th>
                                            <th width="100px" class="text-center">Xử lý </th>
                                            <th min-width="200px" class="text-center">Tên nhà cung cấp </th>
                                            <th width="200px" class="text-center">Mã nhà cung cáp</th>
                                            <th width="200px" class="text-center">Điện thoại liên hệ</th>
                                            <th width="200px" class="text-center">Email</th>
                                            <th width="200px" class="text-center">Mã vật tư/ thiết bị</th>
                                            <th width="200px" class="text-center">Tên vật tư/ thiết bị</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let row of requirementModel.ListSupplier, let i = index;">
                                            <td class="text-center">{{i+1}}</td>
                                            <td style="text-align: center">
                                                <button class="btn btn-xs btn-danger"
                                                    (click)="showConfirmDeleteSolutionSupplier(i,row.Id)"
                                                    placement="top" ngbTooltip="Xóa" container="body">
                                                    <span class="fas fa-times" aria-hidden="true"></span>
                                                </button>
                                            </td>
                                            <td>{{row.Name}}</td>
                                            <td>{{row.Code}}</td>
                                            <td>{{row.PhoneNumber}}</td>
                                            <td>{{row.Email}}</td>
                                            <td>
                                                <textarea type="text" [(ngModel)]="row.CodeProduct" class="form-control"
                                                    [name]="'request' + i" rows="2" >{{row.CodeProduct}}</td>
                                            <td>
                                                <textarea type="text" [(ngModel)]="row.NameProduct" class="form-control"
                                                    [name]="'request' + i" rows="2" >{{row.NameProduct}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </perfect-scrollbar>
                        </div>
                    </div>
                </ng-container>
                <ng-container *ngIf="constant.CustomerRequirementStatus[indexNumber].Id == 4">
                    <div class="row">
                        <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 text-left">
                            <h4>Danh mục thiết bị cần làm giải pháp</h4>
                        </div>
                        <div class="col-lg-6 col-md-6 col-sm-12 text-right">
                            <button type="button" class="btn btn-success"
                                (click)="showCreateUpdateProductNeedSolution()" container="body">
                                <i class="fa fa-plus"></i>
                                Thêm mới
                            </button>
                        </div>
                        <div class="col-md-12 col-sm-12 col-lg-12">
                            <perfect-scrollbar [config]="constant.ScrollXConfig" style="height:auto; width:100%;">
                                <table class="table table-bordered table-fixed" style="min-width:1950px">
                                    <thead>
                                        <tr>
                                            <th width="40px" class="text-center">STT</th>
                                            <th width="80px" class="text-center">Xử lý </th>
                                            <th width="200px" class="text-center">Tên thiết bị </th>
                                            <th width="200px" class="text-center">Mã thiết bị</th>
                                            <th width="200px" class="text-center">Tên nhà sản suất</th>
                                            <th width="200px" class="text-center">Thông số kỹ thuật</th>
                                            <th width="200px" class="text-center">Loại sản phẩm</th>
                                            <th width="200px" class="text-center">Đơn vị</th>
                                            <th width="200px" class="text-center">Số lượng</th>
                                            <th width="200px" class="text-center">Giá</th>
                                            <th width="200px" class="text-center">Ngày giao hàng</th>
                                            <th width="200px" class="text-center">Ghi chú</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let row of SolutionModel.ListProductNeedSolution; let i = index;"
                                            (click)="selectError(i)" [ngClass]="{'selected':selectIndex==i}">
                                            <td class="text-center">{{i+1}}</td>
                                            <td style="text-align: center">
                                                <button type="button" class="btn btn-xs btn-warning" placement="bottom"
                                                    ngbTooltip="Cập nhật" container="body"
                                                    (click)="showCreateUpdateProductNeedSolution(row.Id,i)">
                                                    <span class="fa fa-edit" aria-hidden="true"></span>
                                                </button>&nbsp;
                                                <button class="btn btn-xs btn-danger" ngbTooltip="Xóa"
                                                    (click)="deleteProductNeedSolution(row.Id,i)" placement="bottom">
                                                    <span class="fas fa-times" aria-hidden="true"></span>
                                                </button>
                                            </td>
                                            <td>{{row.Name}}</td>
                                            <td>{{row.Code}}</td>
                                            <td>{{row.ManufactureName}}</td>
                                            <td>{{row.Specifications}}</td>
                                            <td class="text-center">
                                                <nts-status-badge [items]="constant.ProductTypeStatus"
                                                    [value]="row.ProductType"></nts-status-badge>
                                            </td>
                                            <td class="text-center">{{row.Unit}}</td>
                                            <td>{{row.Quantity}}</td>
                                            <td>{{row.Price}}</td>
                                            <td>{{row.DeliveryDate|date:'dd/MM/yyyy'}}</td>
                                            <td>{{row.Note}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </perfect-scrollbar>
                        </div>
                    </div>
                    <br>
                    <!-- <div class="row">
                        <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 text-left">
                            <h4>Danh mục thiết bị cần lấy giá</h4>
                        </div>
                        <div class="col-lg-6 col-md-6 col-sm-12 text-right">
                            <button type="button" class="btn btn-success" (click)="showCreateUpdateProductNeedPrice()"
                                container="body">
                                <i class="fa fa-plus"></i>
                                Thêm mới
                            </button>
                        </div>
                        <div class="col-md-12 col-sm-12 col-lg-12">
                            <perfect-scrollbar [config]="constant.ScrollXConfig" style="height:auto; width:100%;">
                                <table class="table table-bordered table-fixed" style="min-width:1950px">
                                    <thead>
                                        <tr>
                                            <th width="40px" class="text-center">STT</th>
                                            <th width="80px" class="text-center">Xử lý </th>
                                            <th width="200px" class="text-center">Tên thiết bị </th>
                                            <th width="200px" class="text-center">Mã thiết bị</th>
                                            <th width="200px" class="text-center">Tên nhà sản suất</th>
                                            <th width="200px" class="text-center">Thông số kỹ thuật</th>
                                            <th width="200px" class="text-center">Loại sản phẩm</th>
                                            <th width="200px" class="text-center">Bài học</th>
                                            <th width="200px" class="text-center">Định lượng</th>
                                            <th width="200px" class="text-center">Giá</th>
                                            <th width="200px" class="text-center">Ngày giao hàng</th>
                                            <th width="200px" class="text-center">Ghi chú</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let row of SolutionModel.ListProductNeedPrice; let i = index;">
                                            <td class="text-center">{{i+1}}</td>
                                            <td style="text-align: center">
                                                <button type="button" (click)='showCreateUpdateProductNeedPrice(row.Id)'
                                                    class="btn btn-xs btn-warning" placement="bottom"
                                                    ngbTooltip="Cập nhật" container="body">
                                                    <span class="fa fa-edit" aria-hidden="true"></span>
                                                </button>&nbsp;
                                                <button class="btn btn-xs btn-danger"
                                                    (click)="showConfirmDeleteProductNeedPrice(row.Id,i)"
                                                    ngbTooltip="Xóa" placement="bottom">
                                                    <span class="fas fa-times" aria-hidden="true"></span>
                                                </button>
                                            </td>
                                            <td>{{row.Name}}</td>
                                            <td>{{row.code}}</td>
                                            <td>{{row.ManufactureName}}</td>
                                            <td>{{row.Specifications}}</td>
                                            <td>{{row.ProductType}}</td>
                                            <td>{{row.Unit}}</td>
                                            <td>{{row.Quantity}}</td>
                                            <td>{{row.Price}}</td>
                                            <td>{{row.DeliveryDate|date:'dd/MM/yyyy'}}</td>
                                            <td>{{row.Note}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </perfect-scrollbar>
                        </div>
                    </div> -->
                    <div class="row">
                        <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 text-left">
                            <h4> Danh mục giải pháp theo thiết bị</h4>
                        </div>
                        <div *ngIf="selectIndex !=-1" class="col-lg-6 col-md-6 col-sm-12 text-right">
                            <button type="button" class="btn btn-success" container="body"
                                (click)="showChooseSolutionByDevice()">
                                <i class="fa fa-plus"></i>
                                Thêm mới
                            </button>
                        </div>
                        <div class="col-xl-12 col-md-12 col-sm-12 col-xs-12">
                            <perfect-scrollbar [config]="constant.ScrollXConfig" style="height:auto; width:100%;">
                                <table name="tableSolution" class="table table-bordered" style="min-width:2040px">
                                    <thead>
                                        <tr>
                                            <th width="50px" class="text-center">STT</th>
                                            <th width="100px" class="text-center">Xử lý</th>
                                            <!-- <th width="100" class="text-center">Trạng thái</th> -->
                                            <th width="200px" class="text-center">Tên giải pháp</th>
                                            <th width="200px" class="text-center">Mã giải pháp</th>
                                            <th width="200px" class="text-center">Mã dự án</th>
                                            <th width="200px" class="text-center">Tên dự án</th>
                                            <th width="150px" class="text-center">Khách hàng</th>
                                            <th width="150px" class="text-center">Khách hàng cuối</th>
                                            <th width="200px" class="text-center">Người phụ trách kinh doanh</th>
                                            <th width="160px" class="text-center">Người làm giải pháp</th>
                                            <th width="100px" class="text-center">Giá</th>
                                            <th width="130px" class="text-center">Ngày hoàn thành </th>
                                            <th min-width="200px" class="text-center">Mô tả</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let row of SolutionByDevice; let i = index"
                                            (click)="selectProtectSolutions(i)"
                                            [ngClass]="{'selected':selectIndexRequests==i}">
                                            <ng-container *ngIf="row.IsDelete == false">
                                                <td class="text-center">{{i+1}}</td>
                                                <td class="text-center">
                                                    <!-- <button
                                                        class="btn btn-xs btn-primary "
                                                        (click)="showInforSolution(row.Id)" placement="top"
                                                        ngbTooltip="Chi tiết" container="body">
                                                        <span class="fas fa-info" aria-hidden="true"></span>
                                                    </button> &nbsp; -->
                                                    <button class="btn btn-xs btn-danger "
                                                        (click)="showConfirmDeleteProductSolution(i,row.Id)"
                                                        placement="top" ngbTooltip="Xóa" container="body">
                                                        <span class="fas fa-times" aria-hidden="true"></span>
                                                    </button> &nbsp;
                                                    <!-- <button *ngIf="row.StatusRequirementSolution =='Hủy'" 
                                                        class="btn btn-xs btn-success "
                                                        (click)="acceptSolution(i,row.Id)" placement="top"
                                                        ngbTooltip="Chốt" container="body">
                                                        <span class="fas fa-plus" aria-hidden="true"></span>
                                                    </button> 
                                                    <button *ngIf="row.StatusRequirementSolution == 'Chốt'" 
                                                        class="btn btn-xs btn-warning "
                                                        (click)="rejectSolution(i,row.Id)" placement="top"
                                                        ngbTooltip="Hủy" container="body">
                                                        <span class="fas fa-minus" aria-hidden="true"></span>
                                                    </button> -->
                                                    <!-- <button *ngIf="row.StatusRequirementSolution ==''" 
                                                        class="btn btn-xs btn-success "
                                                        (click)="acceptSolution(i,row.Id)" placement="top"
                                                        ngbTooltip="Chốt" container="body">
                                                        <span class="fas fa-plus" aria-hidden="true"></span>
                                                    </button> &nbsp;
                                                    <button *ngIf="row.StatusRequirementSolution == ''" 
                                                        class="btn btn-xs btn-warning "
                                                        (click)="rejectSolution(i,row.Id)" placement="top"
                                                        ngbTooltip="Hủy" container="body">
                                                        <span class="fas fa-minus" aria-hidden="true"></span>
                                                    </button> -->
                                                </td>
                                                <!-- <td class="text-center">
                                                    <span *ngIf="row.StatusRequirementSolution =='Chốt'"
                                                        class="badge badge-success">{{row.StatusRequirementSolution}}
                                                        </span>
                                                    <span *ngIf="row.StatusRequirementSolution == 'Hủy'"
                                                        class="badge badge-danger">{{row.StatusRequirementSolution}}
                                                        </span>
                                                </td> -->
                                                <td>{{row.Name}}</td>
                                                <td>{{row.Code}}</td>
                                                <td>{{row.ProjectCode}}</td>
                                                <td>{{row.ProjectName}}</td>
                                                <td>{{row.CustomerName}}</td>
                                                <td>{{row.EndCustomerName}}</td>
                                                <td>{{row.TPAUName}}</td>
                                                <td>{{row.SolutionMakerName}}</td>
                                                <td class="text-right">{{row.Price|number:'1.0-0'}}</td>
                                                <td class="text-center">{{row.FinishDate|date:'dd/MM/yyyy'}}</td>
                                                <td>{{row.Description}}</td>
                                            </ng-container>
                                        </tr>
                                    </tbody>
                                    <tfoot *ngIf="selectIndex ==-1 && SolutionByDevice.length == 0">
                                        <tr class="bold">
                                            <td colspan="13" class="text-center"
                                                style="height: 100px; font-size: 20px;">Chưa chọn thiết bị, không thể
                                                thêm giải pháp</td>
                                        </tr>
                                    </tfoot>
                                </table>
                            </perfect-scrollbar>
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 text-left">
                            <h4>Danh mục thiết bị cần lấy giá</h4>
                        </div>
                        <div class="col-lg-6 col-md-6 col-sm-12 text-right">
                            <button type="button" class="btn btn-success" (click)="showCreateUpdateProductNeedPrice()"
                                container="body">
                                <i class="fa fa-plus"></i>
                                Thêm mới
                            </button>
                        </div>
                        <div class="col-md-12 col-sm-12 col-lg-12">
                            <perfect-scrollbar [config]="constant.ScrollXConfig" style="height:auto; width:100%;">
                                <table class="table table-bordered table-fixed" style="min-width:1950px">
                                    <thead>
                                        <tr>
                                            <th width="40px" class="text-center">STT</th>
                                            <th width="80px" class="text-center">Xử lý </th>
                                            <th width="200px" class="text-center">Tên thiết bị </th>
                                            <th width="200px" class="text-center">Mã thiết bị</th>
                                            <th width="200px" class="text-center">Tên nhà sản suất</th>
                                            <th width="200px" class="text-center">Thông số kỹ thuật</th>
                                            <th width="200px" class="text-center">Loại sản phẩm</th>
                                            <th width="200px" class="text-center">Đơn vị</th>
                                            <th width="200px" class="text-center">Số lượng</th>
                                            <th width="200px" class="text-center">Giá</th>
                                            <th width="200px" class="text-center">Ngày giao hàng</th>
                                            <th width="200px" class="text-center">Ghi chú</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let row of SolutionModel.ListProductNeedPrice; let i = index;">
                                            <td class="text-center">{{i+1}}</td>
                                            <td style="text-align: center">
                                                <button type="button"
                                                    (click)='showCreateUpdateProductNeedPrice(row.Id,i)'
                                                    class="btn btn-xs btn-warning" placement="bottom"
                                                    ngbTooltip="Cập nhật" container="body">
                                                    <span class="fa fa-edit" aria-hidden="true"></span>
                                                </button>&nbsp;
                                                <button class="btn btn-xs btn-danger"
                                                    (click)="showConfirmDeleteProductNeedPrice(row.Id,i)"
                                                    ngbTooltip="Xóa" placement="bottom">
                                                    <span class="fas fa-times" aria-hidden="true"></span>
                                                </button>
                                            </td>
                                            <td>{{row.Name}}</td>
                                            <td>{{row.Code}}</td>
                                            <td>{{row.ManufactureName}}</td>
                                            <td>{{row.Specifications}}</td>
                                            <td class="text-center">
                                                <nts-status-badge [items]="constant.ProductTypeStatus"
                                                    [value]="row.ProductType"></nts-status-badge>
                                            </td>
                                            <td class="text-center">{{row.Unit}}</td>
                                            <td>{{row.Quantity}}</td>
                                            <td>{{row.Price}}</td>
                                            <td>{{row.DeliveryDate|date:'dd/MM/yyyy'}}</td>
                                            <td>{{row.Note}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </perfect-scrollbar>
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 text-left">
                            <h4>Danh mục giải pháp</h4>
                        </div>
                        <div class="col-lg-6 col-md-6 col-sm-12 text-right">
                            <button type="button" class="btn btn-success" container="body"
                                (click)="showChooseSolution()">
                                <i class="fa fa-plus"></i>
                                Thêm mới
                            </button>
                        </div>
                        <div class="col-xl-12 col-md-12 col-sm-12 col-xs-12">
                            <perfect-scrollbar [config]="constant.ScrollXConfig" style="height:auto; width:100%;">
                                <table name="tableSolution" class="table table-bordered" style="min-width:2040px">
                                    <thead>
                                        <tr>
                                            <th width="50px" class="text-center">STT</th>
                                            <th width="150px" class="text-center">Xử lý</th>
                                            <th width="100px" class="text-center">Trạng thái</th>
                                            <th width="200px" class="text-center">Tên giải pháp</th>
                                            <th width="200px" class="text-center">Mã giải pháp</th>
                                            <th width="200px" class="text-center">Mã dự án</th>
                                            <th width="200px" class="text-center">Tên dự án</th>
                                            <th width="150px" class="text-center">Khách hàng</th>
                                            <th width="150px" class="text-center">Khách hàng cuối</th>
                                            <th width="200px" class="text-center">Người phụ trách kinh doanh</th>
                                            <th width="160px" class="text-center">Người làm giải pháp</th>
                                            <th width="100px" class="text-center">Giá</th>
                                            <th width="130px" class="text-center">Ngày hoàn thành</th>
                                            <th min-width="200px" class="text-center">Mô tả</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let row of SolutionModel.ListSolution; let i = index "
                                            (click)="selectSolution(i)" [ngClass]="{'selected':selectIndexSolution==i}">
                                            <ng-container *ngIf="row.IsDelete == false">
                                                <td class="text-center">{{i+1}}</td>
                                                <td class="text-center">
                                                    <button class="btn btn-xs btn-danger "
                                                        (click)="showConfirmDeleteSolution(i,row.Id)" placement="top"
                                                        ngbTooltip="Xóa" container="body">
                                                        <span class="fas fa-times" aria-hidden="true"></span>
                                                    </button> &nbsp;
                                                    <button *ngIf="row.StatusRequirementSolution =='Hủy'"
                                                        class="btn btn-xs btn-success "
                                                        (click)="acceptSolution(i,row.Id)" placement="top"
                                                        ngbTooltip="Chốt" container="body">
                                                        <span class="fas fa-plus" aria-hidden="true"></span>
                                                    </button>
                                                    <button *ngIf="row.StatusRequirementSolution == 'Chốt'"
                                                        class="btn btn-xs btn-warning "
                                                        (click)="rejectSolution(i,row.Id)" placement="top"
                                                        ngbTooltip="Hủy" container="body">
                                                        <span class="fas fa-minus" aria-hidden="true"></span>
                                                    </button>
                                                    <button *ngIf="row.StatusRequirementSolution ==''"
                                                        class="btn btn-xs btn-success "
                                                        (click)="acceptSolution(i,row.Id)" placement="top"
                                                        ngbTooltip="Chốt" container="body">
                                                        <span class="fas fa-plus" aria-hidden="true"></span>
                                                    </button> &nbsp;
                                                    <button *ngIf="row.StatusRequirementSolution == ''"
                                                        class="btn btn-xs btn-warning "
                                                        (click)="rejectSolution(i,row.Id)" placement="top"
                                                        ngbTooltip="Hủy" container="body">
                                                        <span class="fas fa-minus" aria-hidden="true"></span>
                                                    </button>
                                                </td>
                                                <td class="text-center">
                                                    <span *ngIf="row.StatusRequirementSolution =='Chốt'"
                                                        class="badge badge-success">{{row.StatusRequirementSolution}}
                                                    </span>
                                                    <span *ngIf="row.StatusRequirementSolution == 'Hủy'"
                                                        class="badge badge-danger">{{row.StatusRequirementSolution}}
                                                    </span>
                                                </td>
                                                <td>{{row.Name}}</td>
                                                <td>{{row.Code}}</td>
                                                <td>{{row.ProjectCode}}</td>
                                                <td>{{row.ProjectName}}</td>
                                                <td>{{row.CustomerName}}</td>
                                                <td>{{row.EndCustomerName}}</td>
                                                <td>{{row.TPAUName}}</td>
                                                <td>{{row.SolutionMakerName}}</td>
                                                <td class="text-right">{{row.Price|number:'1.0-0'}}</td>
                                                <td class="text-center">{{row.FinishDate|date:'dd/MM/yyyy'}}</td>
                                                <td>{{row.Description}}</td>
                                            </ng-container>
                                        </tr>
                                    </tbody>
                                </table>
                            </perfect-scrollbar>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 text-left">
                            <h4>Nội dung yêu cầu</h4>
                        </div>
                        <div class="col-xl-12 col-md-12 col-sm-12 col-xs-12">
                            <perfect-scrollbar [config]="constant.ScrollXConfig" style="height:auto; width:100%;">
                                <table name="tableSolution" class="table table-bordered">
                                    <thead>
                                        <tr>
                                            <th width="50px" class="text-center">STT</th>
                                            <th width="250px" class="text-center">Nội dung</th>
                                            <th width="200px" class="text-center">Đáp án TPA</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let row of SolutionContent; let i = index">
                                            <ng-container>
                                                <td class="text-center">{{i+1}}</td>
                                                <td>{{row.Content}}</td>
                                                <td>{{row.AnswerTPA}}</td>
                                            </ng-container>
                                        </tr>
                                    </tbody>
                                    <tfoot *ngIf="SolutionContent.length == 0">
                                        <tr class="bold">
                                            <td colspan="3" class="text-center" style="height: 100px; font-size: 20px;">
                                                Không có dữ liệu</td>
                                        </tr>
                                    </tfoot>
                                </table>
                            </perfect-scrollbar>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12">
                            <h4> Bảo vệ giải pháp</h4>
                        </div>
                        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12">
                            <perfect-scrollbar [config]="constant.ScrollConfig" style="height:auto; width:100%;">
                                <table class="table table-bordered " style="word-wrap: break-word ;min-width:850px;">
                                    <thead>
                                        <tr>
                                            <th width="70px" class="text-center">STT</th>
                                            <th width="100px" class="text-center">Xử lý</th>
                                            <th min-width="300px" class="text-center">yêu cầu </th>
                                            <th min-width="300px" class="text-center">Giải pháp </th>
                                            <th min-width="300px" class="text-center">Ghi chú </th>
                                            <th>Thoi gian</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let row of SolutionModel.ListProtectSolution; let i = index;">
                                            <td class="text-center" width="50px">{{i+1}}</td>
                                            <td class="text-center">
                                                <button type="button" class="btn btn-xs btn-danger" ngbTooltip="Xóa"
                                                    (click)="deleteProtectSolution(i)">
                                                    <span class="fas fa-times" aria-hidden="true"></span>
                                                </button>
                                            </td>
                                            <td>
                                                <textarea type="text" [(ngModel)]="row.Request" class="form-control"
                                                    [name]="'Requests' + i" rows="1"></textarea>
                                            </td>
                                            <td>
                                                <textarea type="text" [(ngModel)]="row.Solution" class="form-control"
                                                    [name]="'Solutions' + i" rows="1"></textarea>
                                            </td>
                                            <td>
                                                <textarea type="text" [(ngModel)]="row.Note" class="form-control"
                                                    [name]="'Notess' + i" rows="1"></textarea>
                                            </td>
                                            <td>
                                                <div class="input-group">
                                                    <input class="form-control" placeholder="dd/mm/yyyy"
                                                        [name]="'FinishDates' + i" [(ngModel)]="row.FinishDate"
                                                        ngbDatepicker #FinishDate="ngbDatepicker">
                                                    <div class="input-group-append">
                                                        <span class="dtp-icon" (click)="FinishDate.toggle()"
                                                            name="FinishDate">
                                                            <i class="far fa-calendar-alt" style="color: #999;"></i>
                                                        </span>
                                                    </div>
                                                </div>
                                            </td>

                                        </tr>
                                        <tr>
                                            <td class="text-center" width="50px"></td>
                                            <td class="text-center">
                                                <button *ngIf="selectIndexRequest !=-2 || selectIndexRequests !=-2"
                                                    type="button" class="btn btn-xs btn-success" ngbTooltip="Thêm dòng"
                                                    (click)="addProtectSolution()">
                                                    <i class="fa fa-plus"></i>
                                                </button>
                                            </td>
                                            <td>
                                                <textarea type="text" [(ngModel)]="protectSolutionModel.Request"
                                                    class="form-control" name="Requests"></textarea>
                                            </td>
                                            <td>
                                                <textarea type="text" [(ngModel)]="protectSolutionModel.Solution"
                                                    class="form-control" name="Solutions"></textarea>
                                            </td>
                                            <td>
                                                <textarea type="text" [(ngModel)]="protectSolutionModel.Note"
                                                    class="form-control" name="Notess"></textarea>
                                            </td>
                                            <td>
                                                <div class="input-group">
                                                    <input class="form-control" placeholder="dd/mm/yyyy"
                                                        name="FinishDatess"
                                                        [(ngModel)]="protectSolutionModel.FinishDate" ngbDatepicker
                                                        #FinishDate="ngbDatepicker">
                                                    <div class="input-group-append">
                                                        <span class="dtp-icon" (click)="FinishDate.toggle()"
                                                            name="FinishDate">
                                                            <i class="far fa-calendar-alt" style="color: #999;"></i>
                                                        </span>
                                                    </div>
                                                </div>
                                            </td>

                                        </tr>
                                    </tbody>
                                </table>
                            </perfect-scrollbar>
                        </div>
                    </div>

                </ng-container>
                <ng-container *ngIf="constant.CustomerRequirementStatus[indexNumber].Id == 5">
                    <div class="row">
                        <div class="col-lg-4 col-md-4 col-xs-4 col-sm-12">
                            <div class="form-group ">
                                <label class="form-label">Tổng giá bán
                                    <span class='text-danger text-strong'>&nbsp;*</span>
                                </label>
                                <div class="controls">
                                    <input [disUipermission]="['F060201','F060202']" currencyMask
                                        [options]="{align:'left', prefix: '', thousands: ',', decimal: '.', precision:2  }"
                                        name="TotalPrice" type="text" class="form-control"
                                        [(ngModel)]="requirementModel.TotalPrice" maxlength="15">
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-12 col-md-12 col-xs-12 col-sm-12">
                            <div class="form-group">
                                <label class="form-label"> Điều kiện thương mại
                                    <span class='text-danger text-strong'>&nbsp;</span>
                                </label>
                                <div class="controls">
                                    <textarea [(ngModel)]="requirementModel.TradeConditions" name="TradeConditions"
                                        rows="5" class="form-control"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-6 col-md-6 col-sm-6">
                            <label>
                                Tài liệu đính kèm
                                <span class='text-danger text-strong'>&nbsp;</span>
                            </label>
                        </div>
                        <div class="col-lg-6 col-md-6 col-sm-12 text-right">
                            <button *appUipermission="['F110801','F110802']" class="btn btn-success btn-upload"
                                (click)="fileMaterialInput.click();">
                                <i class="fas fa-arrow-up"></i> &nbsp;Thêm tài liệu</button>
                            <input name="fileMaterial" style="display: none;" type="file" id="fileMaterial"
                                #fileMaterialInput (change)="uploadFileMaterial($event)" multiple />
                        </div>
                        <div class="col-md-12 col-sm-12 col-lg-12">
                            <perfect-scrollbar [config]="constant.ScrollXConfig" style=" height:auto; width:100%;">
                                <table class="table table-bordered" style="min-width:1030px">
                                    <thead>
                                        <tr>
                                            <th width="50px" class="text-center">STT</th>
                                            <th width="80px" class="text-center">Xử lý</th>
                                            <th width="200px" class="text-center">Tên </th>
                                            <th width="200px" class="text-center">Loại </th>
                                            <th min-width="200px" class="text-center">Ghi chú </th>
                                            <th width="200px" class="text-center">Tên file</th>
                                            <th width="100px" class="text-center">Dung lượng</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <ng-container
                                            *ngFor="let row of requirementModel.ListRequireEstimateMaterialAttach; let i = index">
                                            <tr *ngIf="!row.IsDelete">
                                                <td class="text-center">{{i+1}}</td>
                                                <td class="text-center">
                                                    <ng-container *ngIf="row.FilePath">
                                                        <button type="button" (click)="downloadAFile(row)"
                                                            style="background-color: papayawhip" class="btn btn-xs"
                                                            placement="top" ngbTooltip="Download" container="body">
                                                            <span class="fas fa-download" aria-hidden="true"
                                                                style="color: black"></span>
                                                        </button>&nbsp;
                                                    </ng-container>
                                                    <button type="button" class="btn btn-xs btn-danger" ngbTooltip="Xóa"
                                                        (click)="showConfirmDeleteFile(row,i,1)">
                                                        <span class="fas fa-times" aria-hidden="true"></span>
                                                    </button>
                                                </td>
                                                <td>
                                                    <input type="text" [(ngModel)]="row.Name" class="form-control"
                                                        [name]="'RequireEstimateAttachName' + i">
                                                </td>
                                                <td>
                                                    <select data-size="3" class="form-control" [(ngModel)]="row.Type"
                                                        [name]="'Type' + i">
                                                        <option style="height: auto;"
                                                            *ngFor="let item of constant.TypeRequestEstimateAttach"
                                                            [ngValue]="item.Id">
                                                            {{item.Name}}
                                                        </option>
                                                    </select>
                                                </td>
                                                <td>
                                                    <input type="text" [(ngModel)]="row.Note" class="form-control"
                                                        [name]="'RequireEstimateAttachNote' + i">
                                                </td>
                                                <td>
                                                    {{row.FileName}}
                                                </td>
                                                <td class="text-center">
                                                    {{row.FileSize / (1024*1024)| number: '1.1-3'}} MB
                                                </td>
                                            </tr>
                                        </ng-container>
                                    </tbody>
                                </table>
                            </perfect-scrollbar>
                        </div>
                    </div>

                </ng-container>
                <!-- <ng-container *ngIf="constant.CustomerRequirementStatus[indexNumber].Id == 6">
                    <div class="row">
                        <div class="col-lg-6 col-md-6 col-xs-6 col-sm-12">
                            <div class="form-group">
                                <label class="form-label">Version
                                    <span class='text-danger text-strong'>&nbsp;</span>
                                </label>
                                <div class="controls">
                                    <input ntsNumberInt type="text" class="form-control"
                                        [(ngModel)]="requirementModel.ProtectVersion" name="ProtectVersion"
                                        maxlength="200">
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6 col-xs-6 col-sm-12">
                            <div class="form-group">
                                <label class="form-label">Ngày thay đổi yêu cầu
                                    <span class='text-danger text-strong'>&nbsp;</span>
                                </label>
                                <div class="input-group">
                                    <input class="form-control" placeholder="dd/mm/yyyy" name="ProtectVersionUpdateDate"
                                        [(ngModel)]="requirementModel.ProtectVersionUpdateDate" ngbDatepicker
                                        #ProtectVersionUpdateDate="ngbDatepicker">
                                    <div class="input-group-append">
                                        <span class="dtp-icon" (click)="ProtectVersionUpdateDate.toggle()"
                                            name="ProtectVersionUpdateDate">
                                            <i class="far fa-calendar-alt" style="color: #999;"></i>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6 col-xs-6 col-sm-12">
                            <div class="form-group">
                                <label class="form-label">Nội dung cần làm rõ
                                    <span class='text-danger text-strong'>&nbsp;</span>
                                </label>
                                <div class="controls">
                                    <textarea [(ngModel)]="requirementModel.ContentNeedClarification"
                                        name="ContentNeedClarification" rows="5" class="form-control"></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6 col-xs-6 col-sm-12">
                            <div class="form-group">
                                <label class="form-label">Giải đáp của TPA
                                    <span class='text-danger text-strong'>&nbsp;</span>
                                </label>
                                <div class="controls">
                                    <textarea [(ngModel)]="requirementModel.TPAAnswer" name="TPAAnswer" rows="5"
                                        class="form-control"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </ng-container> -->
                <!-- <ng-container *ngIf="constant.CustomerRequirementStatus[indexNumber].Id == 7">
                </ng-container> -->
                <!-- <ng-container *ngIf="constant.CustomerRequirementStatus[indexNumber].Id == 8">
                    <h1>Yêu cầu của khách hàng đã hủy</h1>
                </ng-container> -->
            </div>
        </section>

        <section class="box">
            <div class="content-body">
                <div class="row">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xl-12 text-right">
                        <!-- <ng-container *ngIf="requirementModel.Status != 0 && requirementModel.Status != 8 ">
                            <button type="button" class="btn btn-danger" (click)="backStep()">
                                <i class="fa fa-chevron-left" aria-hidden="true"></i>&nbsp;
                                <span>Trở lại quy trình trước</span>
                            </button>&nbsp;
                        </ng-container>
                        <ng-container *ngIf="requirementModel.Status == 3">
                            <button type="button" class="btn badge-dark" (click)="nextThreeStep()">
                                <i class="fa fa-chevron-right" aria-hidden="true"></i>&nbsp;
                                <span>Hủy giải pháp</span>
                            </button>&nbsp;
                        </ng-container>
                        <ng-container *ngIf="requirementModel.Status != 7 && requirementModel.Status != 8">
                            <button type="button" class="btn btn-info" (click)="nextStep()">
                                <i class="fa fa-chevron-right" aria-hidden="true"></i>&nbsp;
                                <span>Kết thúc quy trình hiện tại</span>
                            </button>&nbsp;
                        </ng-container>
                        <ng-container *ngIf="requirementModel.Status == 8">
                            <button type="button" class="btn btn-danger" (click)="backThreeStep()">
                                <i class="fa fa-chevron-left" aria-hidden="true"></i>&nbsp;
                                <span>Trở lại quy trình trước</span>
                            </button>&nbsp;
                        </ng-container> -->
                        <button type="button" class="btn btn-default" >
                            <!-- <i class="fas fa-check"></i> &nbsp; -->
                            <span>
                                Bỏ qua
                            </span>
                        </button>&nbsp;
                    
                        <button type="button" class="btn btn-primary" >
                            <i class="fas fa-check"></i> &nbsp;
                            <span>
                                Hoàn thành
                            </span>
                        </button>&nbsp;

                        <ng-container>
                            <button type="button" class="btn btn-success" [disabled]="!f.form.valid"
                                (click)="save(false)">
                                <i class="fa fa-save"></i>&nbsp;
                                <span>{{modalInfo.SaveText}}</span>
                            </button>&nbsp;
                        </ng-container>
                        <button type="button" class="btn btn-danger" (click)="close()">
                            <i class="fa fa-power-off"></i> &nbsp;
                            <span>
                                Ðóng
                            </span>
                        </button>
                    </div>
                </div>
            </div>
        </section>

    </form>
</div>