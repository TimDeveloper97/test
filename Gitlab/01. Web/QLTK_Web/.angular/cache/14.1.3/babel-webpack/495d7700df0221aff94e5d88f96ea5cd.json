{"ast":null,"code":"import { ElementRef } from '@angular/core';\nimport { NtscurrencyPipe } from '../pipe/ntscurrency.pipe';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../pipe/ntscurrency.pipe\";\nexport let NtscurrencyDirective = /*#__PURE__*/(() => {\n  class NtscurrencyDirective {\n    constructor(elementRef, formatcurrencypipe) {\n      this.elementRef = elementRef;\n      this.formatcurrencypipe = formatcurrencypipe;\n      this.options = {};\n      this.el = this.elementRef.nativeElement;\n    }\n\n    ngOnInit() {\n      this.el.value = this.formatcurrencypipe.transform(this.el.value);\n    }\n\n    onFocus(value, event) {\n      this.el.value = this.formatcurrencypipe.parse(value); // opossite of transform\n\n      if (event.which == 9) {\n        return false;\n      }\n\n      this.el.select();\n    }\n\n    onBlur(value) {\n      this.el.value = this.formatcurrencypipe.transform(value);\n    }\n\n    onKeyDown(event) {\n      let e = event;\n\n      if ([46, 8, 9, 27, 13, 110, 190].indexOf(e.keyCode) !== -1 || // Allow: Ctrl+A\n      e.keyCode === 65 && (e.ctrlKey || e.metaKey) || // Allow: Ctrl+C\n      e.keyCode === 67 && (e.ctrlKey || e.metaKey) || // Allow: Ctrl+V\n      e.keyCode === 86 && (e.ctrlKey || e.metaKey) || // Allow: Ctrl+X\n      e.keyCode === 88 && (e.ctrlKey || e.metaKey) || // Allow: home, end, left, right\n      e.keyCode >= 35 && e.keyCode <= 39) {\n        // let it happen, don't do anything\n        return;\n      } // Ensure that it is a number and stop the keypress\n\n\n      if ((e.shiftKey || e.keyCode < 48 || e.keyCode > 57) && (e.keyCode < 96 || e.keyCode > 105)) {\n        e.preventDefault();\n      }\n    }\n\n  }\n\n  NtscurrencyDirective.ɵfac = function NtscurrencyDirective_Factory(t) {\n    return new (t || NtscurrencyDirective)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i1.NtscurrencyPipe));\n  };\n\n  NtscurrencyDirective.ɵdir = /*@__PURE__*/i0.ɵɵdefineDirective({\n    type: NtscurrencyDirective,\n    selectors: [[\"\", \"ntsCurrencyFormatter\", \"\"]],\n    hostBindings: function NtscurrencyDirective_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"focus\", function NtscurrencyDirective_focus_HostBindingHandler($event) {\n          return ctx.onFocus($event.target.value, $event);\n        })(\"blur\", function NtscurrencyDirective_blur_HostBindingHandler($event) {\n          return ctx.onBlur($event.target.value);\n        })(\"keydown\", function NtscurrencyDirective_keydown_HostBindingHandler($event) {\n          return ctx.onKeyDown($event);\n        });\n      }\n    },\n    inputs: {\n      options: \"options\"\n    },\n    features: [i0.ɵɵProvidersFeature([NtscurrencyPipe])]\n  });\n  return NtscurrencyDirective;\n})();","map":null,"metadata":{},"sourceType":"module"}