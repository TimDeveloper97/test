{"ast":null,"code":"(function () {\n  var autoresize = function () {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n\n      var get = function () {\n        return value;\n      };\n\n      var set = function (v) {\n        value = v;\n      };\n\n      var clone = function () {\n        return Cell(get());\n      };\n\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n    var global$1 = tinymce.util.Tools.resolve('tinymce.Env');\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var getAutoResizeMinHeight = function (editor) {\n      return parseInt(editor.getParam('autoresize_min_height', editor.getElement().offsetHeight), 10);\n    };\n\n    var getAutoResizeMaxHeight = function (editor) {\n      return parseInt(editor.getParam('autoresize_max_height', 0), 10);\n    };\n\n    var getAutoResizeOverflowPadding = function (editor) {\n      return editor.getParam('autoresize_overflow_padding', 1);\n    };\n\n    var getAutoResizeBottomMargin = function (editor) {\n      return editor.getParam('autoresize_bottom_margin', 50);\n    };\n\n    var shouldAutoResizeOnInit = function (editor) {\n      return editor.getParam('autoresize_on_init', true);\n    };\n\n    var $_erpp898jjfuw8oln = {\n      getAutoResizeMinHeight: getAutoResizeMinHeight,\n      getAutoResizeMaxHeight: getAutoResizeMaxHeight,\n      getAutoResizeOverflowPadding: getAutoResizeOverflowPadding,\n      getAutoResizeBottomMargin: getAutoResizeBottomMargin,\n      shouldAutoResizeOnInit: shouldAutoResizeOnInit\n    };\n\n    var isFullscreen = function (editor) {\n      return editor.plugins.fullscreen && editor.plugins.fullscreen.isFullscreen();\n    };\n\n    var wait = function (editor, oldSize, times, interval, callback) {\n      global$2.setEditorTimeout(editor, function () {\n        resize(editor, oldSize);\n\n        if (times--) {\n          wait(editor, oldSize, times, interval, callback);\n        } else if (callback) {\n          callback();\n        }\n      }, interval);\n    };\n\n    var toggleScrolling = function (editor, state) {\n      var body = editor.getBody();\n\n      if (body) {\n        body.style.overflowY = state ? '' : 'hidden';\n\n        if (!state) {\n          body.scrollTop = 0;\n        }\n      }\n    };\n\n    var resize = function (editor, oldSize) {\n      var deltaSize, doc, body, resizeHeight, myHeight;\n      var marginTop, marginBottom, paddingTop, paddingBottom, borderTop, borderBottom;\n      var dom = editor.dom;\n      doc = editor.getDoc();\n\n      if (!doc) {\n        return;\n      }\n\n      if (isFullscreen(editor)) {\n        toggleScrolling(editor, true);\n        return;\n      }\n\n      body = doc.body;\n      resizeHeight = $_erpp898jjfuw8oln.getAutoResizeMinHeight(editor);\n      marginTop = dom.getStyle(body, 'margin-top', true);\n      marginBottom = dom.getStyle(body, 'margin-bottom', true);\n      paddingTop = dom.getStyle(body, 'padding-top', true);\n      paddingBottom = dom.getStyle(body, 'padding-bottom', true);\n      borderTop = dom.getStyle(body, 'border-top-width', true);\n      borderBottom = dom.getStyle(body, 'border-bottom-width', true);\n      myHeight = body.offsetHeight + parseInt(marginTop, 10) + parseInt(marginBottom, 10) + parseInt(paddingTop, 10) + parseInt(paddingBottom, 10) + parseInt(borderTop, 10) + parseInt(borderBottom, 10);\n\n      if (isNaN(myHeight) || myHeight <= 0) {\n        myHeight = global$1.ie ? body.scrollHeight : global$1.webkit && body.clientHeight === 0 ? 0 : body.offsetHeight;\n      }\n\n      if (myHeight > $_erpp898jjfuw8oln.getAutoResizeMinHeight(editor)) {\n        resizeHeight = myHeight;\n      }\n\n      var maxHeight = $_erpp898jjfuw8oln.getAutoResizeMaxHeight(editor);\n\n      if (maxHeight && myHeight > maxHeight) {\n        resizeHeight = maxHeight;\n        toggleScrolling(editor, true);\n      } else {\n        toggleScrolling(editor, false);\n      }\n\n      if (resizeHeight !== oldSize.get()) {\n        deltaSize = resizeHeight - oldSize.get();\n        dom.setStyle(editor.iframeElement, 'height', resizeHeight + 'px');\n        oldSize.set(resizeHeight);\n\n        if (global$1.webkit && deltaSize < 0) {\n          resize(editor, oldSize);\n        }\n      }\n    };\n\n    var setup = function (editor, oldSize) {\n      editor.on('init', function () {\n        var overflowPadding, bottomMargin;\n        var dom = editor.dom;\n        overflowPadding = $_erpp898jjfuw8oln.getAutoResizeOverflowPadding(editor);\n        bottomMargin = $_erpp898jjfuw8oln.getAutoResizeBottomMargin(editor);\n\n        if (overflowPadding !== false) {\n          dom.setStyles(editor.getBody(), {\n            paddingLeft: overflowPadding,\n            paddingRight: overflowPadding\n          });\n        }\n\n        if (bottomMargin !== false) {\n          dom.setStyles(editor.getBody(), {\n            paddingBottom: bottomMargin\n          });\n        }\n      });\n      editor.on('nodechange setcontent keyup FullscreenStateChanged', function (e) {\n        resize(editor, oldSize);\n      });\n\n      if ($_erpp898jjfuw8oln.shouldAutoResizeOnInit(editor)) {\n        editor.on('init', function () {\n          wait(editor, oldSize, 20, 100, function () {\n            wait(editor, oldSize, 5, 1000);\n          });\n        });\n      }\n    };\n\n    var $_hhjou8gjfuw8olj = {\n      setup: setup,\n      resize: resize\n    };\n\n    var register = function (editor, oldSize) {\n      editor.addCommand('mceAutoResize', function () {\n        $_hhjou8gjfuw8olj.resize(editor, oldSize);\n      });\n    };\n\n    var $_8apmld8fjfuw8olh = {\n      register: register\n    };\n    global.add('autoresize', function (editor) {\n      if (!editor.inline) {\n        var oldSize = Cell(0);\n        $_8apmld8fjfuw8olh.register(editor, oldSize);\n        $_hhjou8gjfuw8olj.setup(editor, oldSize);\n      }\n    });\n\n    function Plugin() {}\n\n    return Plugin;\n  }();\n})();","map":null,"metadata":{},"sourceType":"script"}