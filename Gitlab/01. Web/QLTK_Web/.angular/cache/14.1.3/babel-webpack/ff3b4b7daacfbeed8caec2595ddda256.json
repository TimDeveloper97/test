{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport * as i0 from \"@angular/core\";\n\nfunction ImageViewerComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 7);\n    i0.ɵɵelement(1, \"div\", 8);\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ImageViewerComponent_button_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function ImageViewerComponent_button_4_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.rotateCounterClockwise());\n    });\n    i0.ɵɵelement(1, \"span\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵclassMap(ctx_r1.config.btnClass);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMap(ctx_r1.config.btnIcons.rotateCounterClockwise);\n  }\n}\n\nfunction ImageViewerComponent_button_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function ImageViewerComponent_button_5_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.rotateClockwise());\n    });\n    i0.ɵɵelement(1, \"span\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵclassMap(ctx_r2.config.btnClass);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMap(ctx_r2.config.btnIcons.rotateClockwise);\n  }\n}\n\nfunction ImageViewerComponent_button_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function ImageViewerComponent_button_6_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.zoomOut());\n    });\n    i0.ɵɵelement(1, \"span\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵclassMap(ctx_r3.config.btnClass);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMap(ctx_r3.config.btnIcons.zoomOut);\n  }\n}\n\nfunction ImageViewerComponent_button_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function ImageViewerComponent_button_7_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.zoomIn());\n    });\n    i0.ɵɵelement(1, \"span\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵclassMap(ctx_r4.config.btnClass);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMap(ctx_r4.config.btnIcons.zoomIn);\n  }\n}\n\nfunction ImageViewerComponent_button_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function ImageViewerComponent_button_8_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r17 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r17.save());\n    });\n    i0.ɵɵelement(1, \"span\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵclassMap(ctx_r5.config.btnClass);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMap(ctx_r5.config.btnIcons.save);\n  }\n}\n\nfunction ImageViewerComponent_button_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r21 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function ImageViewerComponent_button_9_Template_button_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r21);\n      const cBtn_r19 = restoredCtx.$implicit;\n      const ctx_r20 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r20.fireCustomEvent(cBtn_r19.name, ctx_r20.index));\n    });\n    i0.ɵɵelement(1, \"span\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const cBtn_r19 = ctx.$implicit;\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵclassMap(ctx_r6.config.btnClass);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMap(cBtn_r19.icon);\n  }\n}\n\nfunction ImageViewerComponent_button_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function ImageViewerComponent_button_10_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r23);\n      const ctx_r22 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r22.toggleFullscreen());\n    });\n    i0.ɵɵelement(1, \"span\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext();\n    i0.ɵɵclassMap(ctx_r7.config.btnClass);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMap(ctx_r7.config.btnIcons.fullscreen);\n  }\n}\n\nfunction ImageViewerComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r25 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 11)(1, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function ImageViewerComponent_div_11_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r25);\n      const ctx_r24 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r24.prevImage());\n    });\n    i0.ɵɵelement(2, \"span\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function ImageViewerComponent_div_11_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r25);\n      const ctx_r26 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r26.nextImage());\n    });\n    i0.ɵɵelement(4, \"span\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMap(ctx_r8.config.btnClass);\n    i0.ɵɵproperty(\"disabled\", ctx_r8.index === 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMap(ctx_r8.config.btnIcons.prev);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMap(ctx_r8.config.btnClass);\n    i0.ɵɵproperty(\"disabled\", ctx_r8.index === ctx_r8.src.length - 1);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMap(ctx_r8.config.btnIcons.next);\n  }\n}\n\nconst DEFAULT_CONFIG = {\n  btnClass: 'default',\n  zoomFactor: 0.1,\n  containerBackgroundColor: '#ccc',\n  wheelZoom: true,\n  allowFullscreen: true,\n  allowKeyboardNavigation: true,\n  btnShow: {\n    save: true,\n    zoomIn: true,\n    zoomOut: true,\n    rotateClockwise: true,\n    rotateCounterClockwise: true,\n    next: true,\n    prev: true\n  },\n  btnIcons: {\n    save: 'fa fa-save',\n    zoomIn: 'fa fa-plus',\n    zoomOut: 'fa fa-minus',\n    rotateClockwise: 'fa fa-redo',\n    rotateCounterClockwise: 'fa fa-undo',\n    next: 'fa fa-arrow-right',\n    prev: 'fa fa-arrow-left',\n    fullscreen: 'fa fa-arrows-alt'\n  }\n};\nexport let ImageViewerComponent = /*#__PURE__*/(() => {\n  class ImageViewerComponent {\n    constructor() {\n      this.src = [];\n      this.index = 0;\n      this.indexChange = new EventEmitter();\n      this.saveChange = new EventEmitter();\n      this.configChange = new EventEmitter();\n      this.customEvent = new EventEmitter();\n      this.style = {\n        transform: '',\n        msTransform: '',\n        oTransform: '',\n        webkitTransform: ''\n      };\n      this.fullscreen = false;\n      this.loading = true;\n      this.scale = 1;\n      this.rotation = 0;\n      this.translateX = 0;\n      this.translateY = 0;\n      this.hovered = false;\n      this.model = {\n        Rotate: 0,\n        ImageUrl: ''\n      };\n    }\n\n    ngOnInit() {\n      this.config = this.mergeConfig(DEFAULT_CONFIG, this.config);\n      this.triggerConfigBinding();\n    }\n\n    nextImage(event) {\n      if (this.canNavigate(event) && this.index < this.src.length - 1) {\n        this.loading = true;\n        this.index++;\n        this.triggerIndexBinding();\n        this.reset();\n      }\n    }\n\n    prevImage(event) {\n      if (this.canNavigate(event) && this.index > 0) {\n        this.loading = true;\n        this.index--;\n        this.triggerIndexBinding();\n        this.reset();\n      }\n    }\n\n    save() {\n      this.saveChange.emit(this.rotation);\n    }\n\n    zoomIn() {\n      this.scale *= 1 + this.config.zoomFactor;\n      this.updateStyle();\n    }\n\n    zoomOut() {\n      if (this.scale > this.config.zoomFactor) {\n        this.scale /= 1 + this.config.zoomFactor;\n      }\n\n      this.updateStyle();\n    }\n\n    scrollZoom(evt) {\n      if (this.config.wheelZoom) {\n        evt.deltaY > 0 ? this.zoomOut() : this.zoomIn();\n        return false;\n      }\n    }\n\n    rotateClockwise() {\n      this.rotation += 90;\n      this.updateStyle();\n    }\n\n    rotateCounterClockwise() {\n      this.rotation -= 90;\n      this.updateStyle();\n    }\n\n    onLoad() {\n      this.loading = false;\n    }\n\n    onLoadStart() {\n      this.loading = true;\n    }\n\n    onDragOver(evt) {\n      this.translateX += evt.clientX - this.prevX;\n      this.translateY += evt.clientY - this.prevY;\n      this.prevX = evt.clientX;\n      this.prevY = evt.clientY;\n      this.updateStyle();\n    }\n\n    onDragStart(evt) {\n      if (evt.dataTransfer && evt.dataTransfer.setDragImage) {\n        evt.dataTransfer.setDragImage(evt.target.nextElementSibling, 0, 0);\n      }\n\n      this.prevX = evt.clientX;\n      this.prevY = evt.clientY;\n    } // toggleFullscreen() {\n    //   this.fullscreen = !this.fullscreen;\n    //   if (!this.fullscreen) {\n    //     this.reset();\n    //   }\n    // }\n\n\n    triggerIndexBinding() {\n      this.indexChange.emit(this.index);\n    }\n\n    triggerConfigBinding() {\n      this.configChange.next(this.config);\n    }\n\n    fireCustomEvent(name, imageIndex) {\n      this.customEvent.emit(new CustomEvent(name, imageIndex));\n    }\n\n    reset() {\n      this.scale = 1;\n      this.rotation = 0;\n      this.translateX = 0;\n      this.translateY = 0;\n      this.updateStyle();\n    }\n\n    onMouseOver() {\n      this.hovered = true;\n    }\n\n    onMouseLeave() {\n      this.hovered = false;\n    }\n\n    canNavigate(event) {\n      return event == null || this.config.allowKeyboardNavigation && this.hovered;\n    }\n\n    updateStyle() {\n      this.style.transform = `translate(${this.translateX}px, ${this.translateY}px) rotate(${this.rotation}deg) scale(${this.scale})`;\n      this.style.msTransform = this.style.transform;\n      this.style.webkitTransform = this.style.transform;\n      this.style.oTransform = this.style.transform;\n    }\n\n    mergeConfig(defaultValues, overrideValues) {\n      let result = Object.assign({}, defaultValues);\n\n      if (overrideValues) {\n        result = Object.assign(Object.assign({}, defaultValues), overrideValues);\n\n        if (overrideValues.btnIcons) {\n          result.btnIcons = Object.assign(Object.assign({}, defaultValues.btnIcons), overrideValues.btnIcons);\n        }\n      }\n\n      return result;\n    }\n\n  }\n\n  ImageViewerComponent.ɵfac = function ImageViewerComponent_Factory(t) {\n    return new (t || ImageViewerComponent)();\n  };\n\n  ImageViewerComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ImageViewerComponent,\n    selectors: [[\"app-image-viewer\"]],\n    hostBindings: function ImageViewerComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"keyup.ArrowRight\", function ImageViewerComponent_keyup_ArrowRight_HostBindingHandler($event) {\n          return ctx.nextImage($event);\n        }, false, i0.ɵɵresolveWindow)(\"keyup.ArrowLeft\", function ImageViewerComponent_keyup_ArrowLeft_HostBindingHandler($event) {\n          return ctx.prevImage($event);\n        }, false, i0.ɵɵresolveWindow)(\"mouseover\", function ImageViewerComponent_mouseover_HostBindingHandler() {\n          return ctx.onMouseOver();\n        })(\"mouseleave\", function ImageViewerComponent_mouseleave_HostBindingHandler() {\n          return ctx.onMouseLeave();\n        });\n      }\n    },\n    inputs: {\n      src: \"src\",\n      index: \"index\",\n      config: \"config\"\n    },\n    outputs: {\n      indexChange: \"indexChange\",\n      saveChange: \"saveChange\",\n      configChange: \"configChange\",\n      customEvent: \"customEvent\"\n    },\n    decls: 12,\n    vars: 13,\n    consts: [[1, \"img-container\", 3, \"wheel\", \"dragover\"], [\"alt\", \"Image not found...\", 3, \"src\", \"ngStyle\", \"dragstart\", \"load\", \"loadstart\"], [\"class\", \"spinner-container\", 4, \"ngIf\"], [\"type\", \"button\", 3, \"class\", \"click\", 4, \"ngIf\"], [\"type\", \"button\", 3, \"class\", \"click\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"button\", \"id\", \"ngx-fs-btn\", 3, \"class\", \"click\", 4, \"ngIf\"], [\"class\", \"nav-button-container\", 4, \"ngIf\"], [1, \"spinner-container\"], [1, \"spinner\"], [\"type\", \"button\", 3, \"click\"], [\"type\", \"button\", \"id\", \"ngx-fs-btn\", 3, \"click\"], [1, \"nav-button-container\"], [\"type\", \"button\", 3, \"disabled\", \"click\"]],\n    template: function ImageViewerComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵlistener(\"wheel\", function ImageViewerComponent_Template_div_wheel_0_listener($event) {\n          return ctx.scrollZoom($event);\n        })(\"dragover\", function ImageViewerComponent_Template_div_dragover_0_listener($event) {\n          return ctx.onDragOver($event);\n        });\n        i0.ɵɵelementStart(1, \"img\", 1);\n        i0.ɵɵlistener(\"dragstart\", function ImageViewerComponent_Template_img_dragstart_1_listener($event) {\n          return ctx.onDragStart($event);\n        })(\"load\", function ImageViewerComponent_Template_img_load_1_listener() {\n          return ctx.onLoad();\n        })(\"loadstart\", function ImageViewerComponent_Template_img_loadstart_1_listener() {\n          return ctx.onLoadStart();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(2, \"div\");\n        i0.ɵɵtemplate(3, ImageViewerComponent_div_3_Template, 2, 0, \"div\", 2);\n        i0.ɵɵtemplate(4, ImageViewerComponent_button_4_Template, 2, 4, \"button\", 3);\n        i0.ɵɵtemplate(5, ImageViewerComponent_button_5_Template, 2, 4, \"button\", 3);\n        i0.ɵɵtemplate(6, ImageViewerComponent_button_6_Template, 2, 4, \"button\", 3);\n        i0.ɵɵtemplate(7, ImageViewerComponent_button_7_Template, 2, 4, \"button\", 3);\n        i0.ɵɵtemplate(8, ImageViewerComponent_button_8_Template, 2, 4, \"button\", 3);\n        i0.ɵɵtemplate(9, ImageViewerComponent_button_9_Template, 2, 4, \"button\", 4);\n        i0.ɵɵtemplate(10, ImageViewerComponent_button_10_Template, 2, 4, \"button\", 5);\n        i0.ɵɵtemplate(11, ImageViewerComponent_div_11_Template, 5, 10, \"div\", 6);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵstyleProp(\"background-color\", ctx.config.containerBackgroundColor);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"src\", ctx.src[0], i0.ɵɵsanitizeUrl)(\"ngStyle\", ctx.style);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.loading);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.config.btnShow.rotateCounterClockwise);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.config.btnShow.rotateClockwise);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.config.btnShow.zoomOut);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.config.btnShow.zoomIn);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.config.btnShow.save);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.config.customBtns);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.config.allowFullscreen);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.src.length > 1);\n      }\n    },\n    styles: [\"app-image-viewer .img-container{height:100%;width:100%;overflow:hidden;position:relative}app-image-viewer .img-container img{z-index:2;margin:0 auto;display:block;max-width:100%;max-height:100%}app-image-viewer .img-container button{z-index:99;position:absolute;right:15px}app-image-viewer .img-container button:not(:disabled){cursor:pointer}app-image-viewer .img-container>button:nth-of-type(1):not(#ngx-fs-btn){bottom:15px}app-image-viewer .img-container>button:nth-of-type(2):not(#ngx-fs-btn){bottom:65px}app-image-viewer .img-container>button:nth-of-type(3):not(#ngx-fs-btn){bottom:115px}app-image-viewer .img-container>button:nth-of-type(4):not(#ngx-fs-btn){bottom:165px}app-image-viewer .img-container>button:nth-of-type(5):not(#ngx-fs-btn){bottom:215px}app-image-viewer .img-container>button:nth-of-type(6):not(#ngx-fs-btn){bottom:265px}app-image-viewer .img-container>button:nth-of-type(7):not(#ngx-fs-btn){bottom:315px}app-image-viewer #ngx-fs-btn{top:15px}app-image-viewer button.default{height:40px;width:40px;border:1px solid #555;border-radius:50%;background-color:#fff;opacity:.7;transition:opacity .2s}app-image-viewer button.default:hover{opacity:1}app-image-viewer button.default:disabled{opacity:.25}app-image-viewer .nav-button-container>button{position:relative;right:0;margin:0 10px}app-image-viewer .nav-button-container{text-align:center;position:absolute;z-index:98;bottom:10px;left:0;right:0}app-image-viewer .spinner-container{position:absolute;left:0;right:0;top:0;bottom:0;width:60px;height:60px;margin:auto;padding:10px;background-color:#0006;border-radius:25%}app-image-viewer .spinner{border-width:7px;border-style:solid;border-color:#ccc;border-bottom-color:#222;border-radius:50%;height:100%;width:100%;box-sizing:border-box;animation:rotation 2s linear infinite}@keyframes rotation{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(359deg)}}\\n\"],\n    encapsulation: 2\n  });\n  return ImageViewerComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}